"use strict";var jc=Object.create;var it=Object.defineProperty;var Bc=Object.getOwnPropertyDescriptor;var kc=Object.getOwnPropertyNames;var Fc=Object.getPrototypeOf,Gc=Object.prototype.hasOwnProperty;var Vc=(t,e)=>()=>(t&&(e=t(t=0)),e);var h=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Hs=(t,e)=>{for(var r in e)it(t,r,{get:e[r],enumerable:!0})},Ks=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of kc(e))!Gc.call(t,n)&&n!==r&&it(t,n,{get:()=>e[n],enumerable:!(s=Bc(e,n))||s.enumerable});return t};var at=(t,e,r)=>(r=t!=null?jc(Fc(t)):{},Ks(e||!t||!t.__esModule?it(r,"default",{value:t,enumerable:!0}):r,t)),Ys=t=>Ks(it({},"__esModule",{value:!0}),t);var zt=h(Ws=>{"use strict";Ws.parse=function(t,e){return new Le(t,e).parse()};var Le=class{constructor(e,r){this.source=e,this.transform=r||Qc,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,s,n;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!n)this.dimension++,this.dimension>1&&(s=new Le(this.source.substr(this.position-1),this.transform),this.entries.push(s.parse(!0)),this.position+=s.position-2);else if(r.value==="}"&&!n){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(n&&this.newEntry(!0),n=!n):r.value===","&&!n?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function Qc(t){return t}});var Zt=h((bv,Xs)=>{var Uc=zt();Xs.exports={create:function(t,e){return{parse:function(){return Uc.parse(t,e)}}}}});var Zs=h((_v,zs)=>{"use strict";var Hc=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,Kc=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,Yc=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,Wc=/^-?infinity$/;zs.exports=function(e){if(Wc.test(e))return Number(e.replace("i","I"));var r=Hc.exec(e);if(!r)return Xc(e)||null;var s=!!r[8],n=parseInt(r[1],10);s&&(n=Js(n));var i=parseInt(r[2],10)-1,a=r[3],o=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var f,y=Jc(e);return y!=null?(f=new Date(Date.UTC(n,i,a,o,c,u,l)),er(n)&&f.setUTCFullYear(n),y!==0&&f.setTime(f.getTime()-y)):(f=new Date(n,i,a,o,c,u,l),er(n)&&f.setFullYear(n)),f};function Xc(t){var e=Kc.exec(t);if(!!e){var r=parseInt(e[1],10),s=!!e[4];s&&(r=Js(r));var n=parseInt(e[2],10)-1,i=e[3],a=new Date(r,n,i);return er(r)&&a.setFullYear(r),a}}function Jc(t){if(t.endsWith("+00"))return 0;var e=Yc.exec(t.split(" ")[1]);if(!!e){var r=e[1];if(r==="Z")return 0;var s=r==="-"?-1:1,n=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return n*s*1e3}}function Js(t){return-(t-1)}function er(t){return t>=0&&t<100}});var tn=h((Iv,en)=>{en.exports=Zc;var zc=Object.prototype.hasOwnProperty;function Zc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)zc.call(r,s)&&(t[s]=r[s])}return t}});var nn=h((Tv,sn)=>{"use strict";var el=tn();sn.exports=le;function le(t){if(!(this instanceof le))return new le(t);el(this,hl(t))}var tl=["seconds","minutes","hours","days","months","years"];le.prototype.toPostgres=function(){var t=tl.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var rl={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},sl=["years","months","days"],nl=["hours","minutes","seconds"];le.prototype.toISOString=le.prototype.toISO=function(){var t=sl.map(r,this).join(""),e=nl.map(r,this).join("");return"P"+t+"T"+e;function r(s){var n=this[s]||0;return s==="seconds"&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),n+rl[s]}};var tr="([+-]?\\d+)",il=tr+"\\s+years?",al=tr+"\\s+mons?",ol=tr+"\\s+days?",ul="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",cl=new RegExp([il,al,ol,ul].map(function(t){return"("+t+")?"}).join("\\s*")),rn={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},ll=["hours","minutes","seconds","milliseconds"];function fl(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function hl(t){if(!t)return{};var e=cl.exec(t),r=e[8]==="-";return Object.keys(rn).reduce(function(s,n){var i=rn[n],a=e[i];return!a||(a=n==="milliseconds"?fl(a):parseInt(a,10),!a)||(r&&~ll.indexOf(n)&&(a*=-1),s[n]=a),s},{})}});var on=h((Av,an)=>{"use strict";an.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var r="",s=0;s<e.length;)if(e[s]!=="\\")r+=e[s],++s;else if(/[0-7]{3}/.test(e.substr(s+1,3)))r+=String.fromCharCode(parseInt(e.substr(s+1,3),8)),s+=4;else{for(var n=1;s+n<e.length&&e[s+n]==="\\";)n++;for(var i=0;i<Math.floor(n/2);++i)r+="\\";s+=Math.floor(n/2)*2}return new Buffer(r,"binary")}});var dn=h((Rv,pn)=>{var qe=zt(),Ne=Zt(),ot=Zs(),cn=nn(),ln=on();function ut(t){return function(r){return r===null?r:t(r)}}function fn(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function pl(t){return t?qe.parse(t,fn):null}function dl(t){return parseInt(t,10)}function rr(t){return t?qe.parse(t,ut(dl)):null}function ml(t){return t?qe.parse(t,ut(function(e){return hn(e).trim()})):null}var yl=function(t){if(!t)return null;var e=Ne.create(t,function(r){return r!==null&&(r=ar(r)),r});return e.parse()},sr=function(t){if(!t)return null;var e=Ne.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},B=function(t){if(!t)return null;var e=Ne.create(t);return e.parse()},nr=function(t){if(!t)return null;var e=Ne.create(t,function(r){return r!==null&&(r=ot(r)),r});return e.parse()},gl=function(t){if(!t)return null;var e=Ne.create(t,function(r){return r!==null&&(r=cn(r)),r});return e.parse()},El=function(t){return t?qe.parse(t,ut(ln)):null},ir=function(t){return parseInt(t,10)},hn=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},un=function(t){return t?qe.parse(t,ut(JSON.parse)):null},ar=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},vl=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",s=!1,n=2;n<t.length-1;n++){if(s||(e+=t[n]),t[n]===")"){s=!0;continue}else if(!s)continue;t[n]!==","&&(r+=t[n])}var i=ar(e);return i.radius=parseFloat(r),i},Sl=function(t){t(20,hn),t(21,ir),t(23,ir),t(26,ir),t(700,parseFloat),t(701,parseFloat),t(16,fn),t(1082,ot),t(1114,ot),t(1184,ot),t(600,ar),t(651,B),t(718,vl),t(1e3,pl),t(1001,El),t(1005,rr),t(1007,rr),t(1028,rr),t(1016,ml),t(1017,yl),t(1021,sr),t(1022,sr),t(1231,sr),t(1014,B),t(1015,B),t(1008,B),t(1009,B),t(1040,B),t(1041,B),t(1115,nr),t(1182,nr),t(1185,nr),t(1186,cn),t(1187,gl),t(17,ln),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,un),t(3807,un),t(3907,B),t(2951,B),t(791,B),t(1183,B),t(1270,B)};pn.exports={init:Sl}});var yn=h((xv,mn)=>{"use strict";var D=1e6;function wl(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),s="";e<0&&(e=~e+(r===0),r=~r+1>>>0,s="-");var n="",i,a,o,c,u,l;{if(i=e%D,e=e/D>>>0,a=4294967296*i+r,r=a/D>>>0,o=""+(a-D*r),r===0&&e===0)return s+o+n;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";n=c+o+n}{if(i=e%D,e=e/D>>>0,a=4294967296*i+r,r=a/D>>>0,o=""+(a-D*r),r===0&&e===0)return s+o+n;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";n=c+o+n}{if(i=e%D,e=e/D>>>0,a=4294967296*i+r,r=a/D>>>0,o=""+(a-D*r),r===0&&e===0)return s+o+n;for(c="",u=6-o.length,l=0;l<u;l++)c+="0";n=c+o+n}return i=e%D,a=4294967296*i+r,o=""+a%D,s+o+n}mn.exports=wl});var wn=h((Pv,Sn)=>{var bl=yn(),_=function(t,e,r,s,n){r=r||0,s=s||!1,n=n||function(p,S,R){return p*Math.pow(2,R)+S};var i=r>>3,a=function(p){return s?~p&255:p},o=255,c=8-r%8;e<c&&(o=255<<8-e&255,c=e),r&&(o=o>>r%8);var u=0;r%8+e>=8&&(u=n(0,a(t[i])&o,c));for(var l=e+r>>3,f=i+1;f<l;f++)u=n(u,a(t[f]),8);var y=(e+r)%8;return y>0&&(u=n(u,a(t[l])>>8-y,y)),u},vn=function(t,e,r){var s=Math.pow(2,r-1)-1,n=_(t,1),i=_(t,r,1);if(i===0)return 0;var a=1,o=function(u,l,f){u===0&&(u=1);for(var y=1;y<=f;y++)a/=2,(l&1<<f-y)>0&&(u+=a);return u},c=_(t,e,r+1,!1,o);return i==Math.pow(2,r+1)-1?c===0?n===0?1/0:-1/0:NaN:(n===0?1:-1)*Math.pow(2,i-s)*c},_l=function(t){return _(t,1)==1?-1*(_(t,15,1,!0)+1):_(t,15,1)},gn=function(t){return _(t,1)==1?-1*(_(t,31,1,!0)+1):_(t,31,1)},Il=function(t){return vn(t,23,8)},Tl=function(t){return vn(t,52,11)},Al=function(t){var e=_(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,_(t,16,16)),s=0,n=[],i=_(t,16),a=0;a<i;a++)s+=_(t,16,64+16*a)*r,r/=1e4;var o=Math.pow(10,_(t,16,48));return(e===0?1:-1)*Math.round(s*o)/o},En=function(t,e){var r=_(e,1),s=_(e,63,1),n=new Date((r===0?1:-1)*s/1e3+9466848e5);return t||n.setTime(n.getTime()+n.getTimezoneOffset()*6e4),n.usec=s%1e3,n.getMicroSeconds=function(){return this.usec},n.setMicroSeconds=function(i){this.usec=i},n.getUTCMicroSeconds=function(){return this.usec},n},De=function(t){for(var e=_(t,32),r=_(t,32,32),s=_(t,32,64),n=96,i=[],a=0;a<e;a++)i[a]=_(t,32,n),n+=32,n+=32;var o=function(u){var l=_(t,32,n);if(n+=32,l==4294967295)return null;var f;if(u==23||u==20)return f=_(t,l*8,n),n+=l*8,f;if(u==25)return f=t.toString(this.encoding,n>>3,(n+=l<<3)>>3),f;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var f=[],y;if(u.length>1){var p=u.shift();for(y=0;y<p;y++)f[y]=c(u,l);u.unshift(p)}else for(y=0;y<u[0];y++)f[y]=o(l);return f};return c(i,s)},Rl=function(t){return t.toString("utf8")},xl=function(t){return t===null?null:_(t,8)>0},Pl=function(t){t(20,bl),t(21,_l),t(23,gn),t(26,gn),t(1700,Al),t(700,Il),t(701,Tl),t(16,xl),t(1114,En.bind(null,!1)),t(1184,En.bind(null,!0)),t(1e3,De),t(1007,De),t(1016,De),t(1008,De),t(1009,De),t(25,Rl)};Sn.exports={init:Pl}});var _n=h((Ov,bn)=>{bn.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var je=h(Me=>{var Ol=dn(),Cl=wn(),Ll=Zt(),ql=_n();Me.getTypeParser=Nl;Me.setTypeParser=Dl;Me.arrayParser=Ll;Me.builtins=ql;var $e={text:{},binary:{}};function In(t){return String(t)}function Nl(t,e){return e=e||"text",$e[e]&&$e[e][t]||In}function Dl(t,e,r){typeof e=="function"&&(r=e,e="text"),$e[e][t]=r}Ol.init(function(t,e){$e.text[t]=e});Cl.init(function(t,e){$e.binary[t]=e})});var Be=h((Lv,or)=>{"use strict";or.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var fe=je(),$l=fe.getTypeParser(20,"text"),Ml=fe.getTypeParser(1016,"text");or.exports.__defineSetter__("parseInt8",function(t){fe.setTypeParser(20,"text",t?fe.getTypeParser(23,"text"):$l),fe.setTypeParser(1016,"text",t?fe.getTypeParser(1007,"text"):Ml)})});var ke=h((qv,An)=>{"use strict";var jl=Be();function Bl(t){var e=t.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+e+'"'}function Tn(t){for(var e="{",r=0;r<t.length;r++)r>0&&(e=e+","),t[r]===null||typeof t[r]>"u"?e=e+"NULL":Array.isArray(t[r])?e=e+Tn(t[r]):t[r]instanceof Buffer?e+="\\\\x"+t[r].toString("hex"):e+=Bl(ct(t[r]));return e=e+"}",e}var ct=function(t,e){if(t==null)return null;if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){var r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return t instanceof Date?jl.parseInputDatesAsUTC?Gl(t):Fl(t):Array.isArray(t)?Tn(t):typeof t=="object"?kl(t,e):t.toString()};function kl(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),ct(t.toPostgres(ct),e)}return JSON.stringify(t)}function O(t,e){for(t=""+t;t.length<e;)t="0"+t;return t}function Fl(t){var e=-t.getTimezoneOffset(),r=t.getFullYear(),s=r<1;s&&(r=Math.abs(r)+1);var n=O(r,4)+"-"+O(t.getMonth()+1,2)+"-"+O(t.getDate(),2)+"T"+O(t.getHours(),2)+":"+O(t.getMinutes(),2)+":"+O(t.getSeconds(),2)+"."+O(t.getMilliseconds(),3);return e<0?(n+="-",e*=-1):n+="+",n+=O(Math.floor(e/60),2)+":"+O(e%60,2),s&&(n+=" BC"),n}function Gl(t){var e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);var s=O(e,4)+"-"+O(t.getUTCMonth()+1,2)+"-"+O(t.getUTCDate(),2)+"T"+O(t.getUTCHours(),2)+":"+O(t.getUTCMinutes(),2)+":"+O(t.getUTCSeconds(),2)+"."+O(t.getUTCMilliseconds(),3);return s+="+00:00",r&&(s+=" BC"),s}function Vl(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var Ql=function(t){return'"'+t.replace(/"/g,'""')+'"'},Ul=function(t){for(var e=!1,r="'",s=0;s<t.length;s++){var n=t[s];n==="'"?r+=n+n:n==="\\"?(r+=n+n,e=!0):r+=n}return r+="'",e===!0&&(r=" E"+r),r};An.exports={prepareValue:function(e){return ct(e)},normalizeQueryConfig:Vl,escapeIdentifier:Ql,escapeLiteral:Ul}});var xn=h((Nv,Rn)=>{"use strict";var Fe=require("crypto");function ur(t){return Fe.createHash("md5").update(t,"utf-8").digest("hex")}function Hl(t,e,r){var s=ur(e+t),n=ur(Buffer.concat([Buffer.from(s),r]));return"md5"+n}function Kl(t){return Fe.createHash("sha256").update(t).digest()}function Yl(t,e){return Fe.createHmac("sha256",t).update(e).digest()}async function Wl(t,e,r){return Fe.pbkdf2Sync(t,e,r,32,"sha256")}Rn.exports={postgresMd5PasswordHash:Hl,randomBytes:Fe.randomBytes,deriveKey:Wl,sha256:Kl,hmacSha256:Yl,md5:ur}});var Ln=h((Dv,Cn)=>{var Pn=require("crypto");Cn.exports={postgresMd5PasswordHash:Jl,randomBytes:Xl,deriveKey:ef,sha256:zl,hmacSha256:Zl,md5:cr};var On=Pn.webcrypto||globalThis.crypto,he=On.subtle,lr=new TextEncoder;function Xl(t){return On.getRandomValues(Buffer.alloc(t))}async function cr(t){try{return Pn.createHash("md5").update(t,"utf-8").digest("hex")}catch{let r=typeof t=="string"?lr.encode(t):t,s=await he.digest("MD5",r);return Array.from(new Uint8Array(s)).map(n=>n.toString(16).padStart(2,"0")).join("")}}async function Jl(t,e,r){var s=await cr(e+t),n=await cr(Buffer.concat([Buffer.from(s),r]));return"md5"+n}async function zl(t){return await he.digest("SHA-256",t)}async function Zl(t,e){let r=await he.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await he.sign("HMAC",r,lr.encode(e))}async function ef(t,e,r){let s=await he.importKey("raw",lr.encode(t),"PBKDF2",!1,["deriveBits"]),n={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:r};return await he.deriveBits(n,s,32*8,["deriveBits"])}});var hr=h(($v,fr)=>{"use strict";var tf=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;tf?fr.exports=xn():fr.exports=Ln()});var $n=h((Mv,Dn)=>{"use strict";var re=hr();function rf(t){if(t.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let e=re.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:e,response:"n,,n=*,r="+e,message:"SASLInitialResponse"}}async function sf(t,e,r){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=of(r);if(s.nonce.startsWith(t.clientNonce)){if(s.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var n="n=*,r="+t.clientNonce,i="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a="c=biws,r="+s.nonce,o=n+","+i+","+a,c=Buffer.from(s.salt,"base64"),u=await re.deriveKey(e,c,s.iteration),l=await re.hmacSha256(u,"Client Key"),f=await re.sha256(l),y=await re.hmacSha256(f,o),p=cf(Buffer.from(l),Buffer.from(y)).toString("base64"),S=await re.hmacSha256(u,"Server Key"),R=await re.hmacSha256(S,o);t.message="SASLResponse",t.serverSignature=Buffer.from(R).toString("base64"),t.response=a+",p="+p}function nf(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=uf(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function af(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function qn(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function Nn(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],s=e.substring(2);return[r,s]}))}function of(t){let e=Nn(t),r=e.get("r");if(r){if(!af(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let s=e.get("s");if(s){if(!qn(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let n=e.get("i");if(n){if(!/^[1-9][0-9]*$/.test(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let i=parseInt(n,10);return{nonce:r,salt:s,iteration:i}}function uf(t){let r=Nn(t).get("v");if(r){if(!qn(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function cf(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,s)=>t[s]^e[s]))}Dn.exports={startSession:rf,continueSession:sf,finalizeSession:nf}});var pr=h((jv,Mn)=>{"use strict";var lf=je();function lt(t){this._types=t||lf,this.text={},this.binary={}}lt.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};lt.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};lt.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};Mn.exports=lt});var Bn=h((Bv,jn)=>{"use strict";function dr(t){if(t.charAt(0)==="/"){let o=t.split(" ");return{host:o[0],database:o[1]}}let e={},r,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/\%25(\d\d)/g,"%$1"));try{r=new URL(t,"postgres://base")}catch{r=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}for(let o of r.searchParams.entries())e[o[0]]=o[1];if(e.user=e.user||decodeURIComponent(r.username),e.password=e.password||decodeURIComponent(r.password),r.protocol=="socket:")return e.host=decodeURI(r.pathname),e.database=r.searchParams.get("db"),e.client_encoding=r.searchParams.get("encoding"),e;let n=s?"":r.hostname;e.host?n&&/^%2f/i.test(n)&&(r.pathname=n+r.pathname):e.host=decodeURIComponent(n),e.port||(e.port=r.port);let i=r.pathname.slice(1)||null;e.database=i?decodeURI(i):null,(e.ssl==="true"||e.ssl==="1")&&(e.ssl=!0),e.ssl==="0"&&(e.ssl=!1),(e.sslcert||e.sslkey||e.sslrootcert||e.sslmode)&&(e.ssl={});let a=e.sslcert||e.sslkey||e.sslrootcert?require("fs"):null;switch(e.sslcert&&(e.ssl.cert=a.readFileSync(e.sslcert).toString()),e.sslkey&&(e.ssl.key=a.readFileSync(e.sslkey).toString()),e.sslrootcert&&(e.ssl.ca=a.readFileSync(e.sslrootcert).toString()),e.sslmode){case"disable":{e.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{e.ssl.rejectUnauthorized=!1;break}}return e}jn.exports=dr;dr.parse=dr});var yr=h((kv,Gn)=>{"use strict";var ff=require("dns"),Fn=Be(),kn=Bn().parse,L=function(t,e,r){return r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),e[t]||r||Fn[t]},hf=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Fn.ssl},pe=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},k=function(t,e,r){var s=e[r];s!=null&&t.push(r+"="+pe(s))},mr=class{constructor(e){e=typeof e=="string"?kn(e):e||{},e.connectionString&&(e=Object.assign({},e,kn(e.connectionString))),this.user=L("user",e),this.database=L("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(L("port",e),10),this.host=L("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:L("password",e)}),this.binary=L("binary",e),this.options=L("options",e),this.ssl=typeof e.ssl>"u"?hf():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=L("client_encoding",e),this.replication=L("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=L("application_name",e,"PGAPPNAME"),this.fallback_application_name=L("fallback_application_name",e,!1),this.statement_timeout=L("statement_timeout",e,!1),this.lock_timeout=L("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=L("idle_in_transaction_session_timeout",e,!1),this.query_timeout=L("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var r=[];k(r,this,"user"),k(r,this,"password"),k(r,this,"port"),k(r,this,"application_name"),k(r,this,"fallback_application_name"),k(r,this,"connect_timeout"),k(r,this,"options");var s=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(k(r,s,"sslmode"),k(r,s,"sslca"),k(r,s,"sslkey"),k(r,s,"sslcert"),k(r,s,"sslrootcert"),this.database&&r.push("dbname="+pe(this.database)),this.replication&&r.push("replication="+pe(this.replication)),this.host&&r.push("host="+pe(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+pe(this.client_encoding)),ff.lookup(this.host,function(n,i){return n?e(n,null):(r.push("hostaddr="+pe(i)),e(null,r.join(" ")))})}};Gn.exports=mr});var Un=h((Fv,Qn)=>{"use strict";var pf=je(),Vn=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,gr=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){var r;e.text?r=Vn.exec(e.text):r=Vn.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){for(var r=new Array(e.length),s=0,n=e.length;s<n;s++){var i=e[s];i!==null?r[s]=this._parsers[s](i):r[s]=null}return r}parseRow(e){for(var r={...this._prebuiltEmptyResultObject},s=0,n=e.length;s<n;s++){var i=e[s],a=this.fields[s].name;i!==null&&(r[a]=this._parsers[s](i))}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var r=0;r<e.length;r++){var s=e[r];this._types?this._parsers[r]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[r]=pf.getTypeParser(s.dataTypeID,s.format||"text")}this._createPrebuiltEmptyResultObject()}_createPrebuiltEmptyResultObject(){for(var e={},r=0;r<this.fields.length;r++)e[this.fields[r].name]=null;this._prebuiltEmptyResultObject={...e}}};Qn.exports=gr});var Wn=h((Gv,Yn)=>{"use strict";var{EventEmitter:df}=require("events"),Hn=Un(),Kn=ke(),Er=class extends df{constructor(e,r,s){super(),e=Kn.normalizeQueryConfig(e,r,s),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new Hn(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new Hn(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(s){this._canceledDueToError=s;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];return this.text&&r&&this.text!==r?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:Kn.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};Yn.exports=Er});var qr=h(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.NoticeMessage=g.DataRowMessage=g.CommandCompleteMessage=g.ReadyForQueryMessage=g.NotificationResponseMessage=g.BackendKeyDataMessage=g.AuthenticationMD5Password=g.ParameterStatusMessage=g.ParameterDescriptionMessage=g.RowDescriptionMessage=g.Field=g.CopyResponse=g.CopyDataMessage=g.DatabaseError=g.copyDone=g.emptyQuery=g.replicationStart=g.portalSuspended=g.noData=g.closeComplete=g.bindComplete=g.parseComplete=void 0;g.parseComplete={name:"parseComplete",length:5};g.bindComplete={name:"bindComplete",length:5};g.closeComplete={name:"closeComplete",length:5};g.noData={name:"noData",length:5};g.portalSuspended={name:"portalSuspended",length:5};g.replicationStart={name:"replicationStart",length:4};g.emptyQuery={name:"emptyQuery",length:4};g.copyDone={name:"copyDone",length:4};var vr=class extends Error{constructor(e,r,s){super(e),this.length=r,this.name=s}};g.DatabaseError=vr;var Sr=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};g.CopyDataMessage=Sr;var wr=class{constructor(e,r,s,n){this.length=e,this.name=r,this.binary=s,this.columnTypes=new Array(n)}};g.CopyResponse=wr;var br=class{constructor(e,r,s,n,i,a,o){this.name=e,this.tableID=r,this.columnID=s,this.dataTypeID=n,this.dataTypeSize=i,this.dataTypeModifier=a,this.format=o}};g.Field=br;var _r=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};g.RowDescriptionMessage=_r;var Ir=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};g.ParameterDescriptionMessage=Ir;var Tr=class{constructor(e,r,s){this.length=e,this.parameterName=r,this.parameterValue=s,this.name="parameterStatus"}};g.ParameterStatusMessage=Tr;var Ar=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};g.AuthenticationMD5Password=Ar;var Rr=class{constructor(e,r,s){this.length=e,this.processID=r,this.secretKey=s,this.name="backendKeyData"}};g.BackendKeyDataMessage=Rr;var xr=class{constructor(e,r,s,n){this.length=e,this.processId=r,this.channel=s,this.payload=n,this.name="notification"}};g.NotificationResponseMessage=xr;var Pr=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};g.ReadyForQueryMessage=Pr;var Or=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};g.CommandCompleteMessage=Or;var Cr=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};g.DataRowMessage=Cr;var Lr=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};g.NoticeMessage=Lr});var Xn=h(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.Writer=void 0;var Nr=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){var r=this.buffer.length-this.offset;if(r<e){var s=this.buffer,n=s.length+(s.length>>1)+e;this.buffer=Buffer.allocUnsafe(n),s.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{var r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){var r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};ft.Writer=Nr});var zn=h(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.serialize=void 0;var Dr=Xn(),I=new Dr.Writer,mf=t=>{I.addInt16(3).addInt16(0);for(let s of Object.keys(t))I.addCString(s).addCString(t[s]);I.addCString("client_encoding").addCString("UTF8");var e=I.addCString("").flush(),r=e.length+4;return new Dr.Writer().addInt32(r).add(e).flush()},yf=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},gf=t=>I.addCString(t).flush(112),Ef=function(t,e){return I.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),I.flush(112)},vf=function(t){return I.addString(t).flush(112)},Sf=t=>I.addCString(t).flush(81),Jn=[],wf=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||Jn;for(var s=r.length,n=I.addCString(e).addCString(t.text).addInt16(s),i=0;i<s;i++)n.addInt32(r[i]);return I.flush(80)},de=new Dr.Writer,bf=function(t,e){for(let r=0;r<t.length;r++){let s=e?e(t[r],r):t[r];s==null?(I.addInt16(0),de.addInt32(-1)):s instanceof Buffer?(I.addInt16(1),de.addInt32(s.length),de.add(s)):(I.addInt16(0),de.addInt32(Buffer.byteLength(s)),de.addString(s))}},_f=(t={})=>{let e=t.portal||"",r=t.statement||"",s=t.binary||!1,n=t.values||Jn,i=n.length;return I.addCString(e).addCString(r),I.addInt16(i),bf(n,t.valueMapper),I.addInt16(i),I.add(de.flush()),I.addInt16(s?1:0),I.flush(66)},If=Buffer.from([69,0,0,0,9,0,0,0,0,0]),Tf=t=>{if(!t||!t.portal&&!t.rows)return If;let e=t.portal||"",r=t.rows||0,s=Buffer.byteLength(e),n=4+s+1+4,i=Buffer.allocUnsafe(1+n);return i[0]=69,i.writeInt32BE(n,1),i.write(e,5,"utf-8"),i[s+5]=0,i.writeUInt32BE(r,i.length-4),i},Af=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},$r=(t,e)=>{let r=Buffer.byteLength(e),s=4+r+1,n=Buffer.allocUnsafe(1+s);return n[0]=t,n.writeInt32BE(s,1),n.write(e,5,"utf-8"),n[s]=0,n},Rf=I.addCString("P").flush(68),xf=I.addCString("S").flush(68),Pf=t=>t.name?$r(68,`${t.type}${t.name||""}`):t.type==="P"?Rf:xf,Of=t=>{let e=`${t.type}${t.name||""}`;return $r(67,e)},Cf=t=>I.add(t).flush(100),Lf=t=>$r(102,t),ht=t=>Buffer.from([t,0,0,0,4]),qf=ht(72),Nf=ht(83),Df=ht(88),$f=ht(99),Mf={startup:mf,password:gf,requestSsl:yf,sendSASLInitialResponseMessage:Ef,sendSCRAMClientFinalMessage:vf,query:Sf,parse:wf,bind:_f,execute:Tf,describe:Pf,close:Of,flush:()=>qf,sync:()=>Nf,end:()=>Df,copyData:Cf,copyDone:()=>$f,copyFail:Lf,cancel:Af};pt.serialize=Mf});var Zn=h(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.BufferReader=void 0;var jf=Buffer.allocUnsafe(0),Mr=class{constructor(e=0){this.offset=e,this.buffer=jf,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};dt.BufferReader=Mr});var ri=h(me=>{"use strict";var Bf=me&&me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(me,"__esModule",{value:!0});me.Parser=void 0;var T=qr(),kf=Zn(),Ff=Bf(require("assert")),jr=1,Gf=4,ei=jr+Gf,ti=Buffer.allocUnsafe(0),Br=class{constructor(e){if(this.buffer=ti,this.bufferLength=0,this.bufferOffset=0,this.reader=new kf.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let s=this.bufferOffset+this.bufferLength,n=this.bufferOffset;for(;n+ei<=s;){let i=this.buffer[n],a=this.buffer.readUInt32BE(n+jr),o=jr+a;if(o+n<=s){let c=this.handlePacket(n+ei,i,a,this.buffer);r(c),n+=o}else break}n===s?(this.buffer=ti,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=s-n,this.bufferOffset=n)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let n;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)n=this.buffer;else{let i=this.buffer.byteLength*2;for(;r>=i;)i*=2;n=Buffer.allocUnsafe(i)}this.buffer.copy(n,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=n,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,s,n){switch(r){case 50:return T.bindComplete;case 49:return T.parseComplete;case 51:return T.closeComplete;case 110:return T.noData;case 115:return T.portalSuspended;case 99:return T.copyDone;case 87:return T.replicationStart;case 73:return T.emptyQuery;case 68:return this.parseDataRowMessage(e,s,n);case 67:return this.parseCommandCompleteMessage(e,s,n);case 90:return this.parseReadyForQueryMessage(e,s,n);case 65:return this.parseNotificationMessage(e,s,n);case 82:return this.parseAuthenticationResponse(e,s,n);case 83:return this.parseParameterStatusMessage(e,s,n);case 75:return this.parseBackendKeyData(e,s,n);case 69:return this.parseErrorMessage(e,s,n,"error");case 78:return this.parseErrorMessage(e,s,n,"notice");case 84:return this.parseRowDescriptionMessage(e,s,n);case 116:return this.parseParameterDescriptionMessage(e,s,n);case 71:return this.parseCopyInMessage(e,s,n);case 72:return this.parseCopyOutMessage(e,s,n);case 100:return this.parseCopyData(e,s,n);default:Ff.default.fail(`unknown message code: ${r.toString(16)}`)}}parseReadyForQueryMessage(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.string(1);return new T.ReadyForQueryMessage(r,n)}parseCommandCompleteMessage(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.cstring();return new T.CommandCompleteMessage(r,n)}parseCopyData(e,r,s){let n=s.slice(e,e+(r-4));return new T.CopyDataMessage(r,n)}parseCopyInMessage(e,r,s){return this.parseCopyMessage(e,r,s,"copyInResponse")}parseCopyOutMessage(e,r,s){return this.parseCopyMessage(e,r,s,"copyOutResponse")}parseCopyMessage(e,r,s,n){this.reader.setBuffer(e,s);let i=this.reader.byte()!==0,a=this.reader.int16(),o=new T.CopyResponse(r,n,i,a);for(let c=0;c<a;c++)o.columnTypes[c]=this.reader.int16();return o}parseNotificationMessage(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.int32(),i=this.reader.cstring(),a=this.reader.cstring();return new T.NotificationResponseMessage(r,n,i,a)}parseRowDescriptionMessage(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.int16(),i=new T.RowDescriptionMessage(r,n);for(let a=0;a<n;a++)i.fields[a]=this.parseField();return i}parseField(){let e=this.reader.cstring(),r=this.reader.int32(),s=this.reader.int16(),n=this.reader.int32(),i=this.reader.int16(),a=this.reader.int32(),o=this.reader.int16()===0?"text":"binary";return new T.Field(e,r,s,n,i,a,o)}parseParameterDescriptionMessage(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.int16(),i=new T.ParameterDescriptionMessage(r,n);for(let a=0;a<n;a++)i.dataTypeIDs[a]=this.reader.int32();return i}parseDataRowMessage(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.int16(),i=new Array(n);for(let a=0;a<n;a++){let o=this.reader.int32();i[a]=o===-1?null:this.reader.string(o)}return new T.DataRowMessage(r,i)}parseParameterStatusMessage(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.cstring(),i=this.reader.cstring();return new T.ParameterStatusMessage(r,n,i)}parseBackendKeyData(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.int32(),i=this.reader.int32();return new T.BackendKeyDataMessage(r,n,i)}parseAuthenticationResponse(e,r,s){this.reader.setBuffer(e,s);let n=this.reader.int32(),i={name:"authenticationOk",length:r};switch(n){case 0:break;case 3:i.length===8&&(i.name="authenticationCleartextPassword");break;case 5:if(i.length===12){i.name="authenticationMD5Password";let o=this.reader.bytes(4);return new T.AuthenticationMD5Password(r,o)}break;case 10:i.name="authenticationSASL",i.mechanisms=[];let a;do a=this.reader.cstring(),a&&i.mechanisms.push(a);while(a);break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(r-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+n)}return i}parseErrorMessage(e,r,s,n){this.reader.setBuffer(e,s);let i={},a=this.reader.string(1);for(;a!=="\0";)i[a]=this.reader.cstring(),a=this.reader.string(1);let o=i.M,c=n==="notice"?new T.NoticeMessage(r,o):new T.DatabaseError(o,r,n);return c.severity=i.S,c.code=i.C,c.detail=i.D,c.hint=i.H,c.position=i.P,c.internalPosition=i.p,c.internalQuery=i.q,c.where=i.W,c.schema=i.s,c.table=i.t,c.column=i.c,c.dataType=i.d,c.constraint=i.n,c.file=i.F,c.line=i.L,c.routine=i.R,c}};me.Parser=Br});var kr=h(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.DatabaseError=z.serialize=z.parse=void 0;var Vf=qr();Object.defineProperty(z,"DatabaseError",{enumerable:!0,get:function(){return Vf.DatabaseError}});var Qf=zn();Object.defineProperty(z,"serialize",{enumerable:!0,get:function(){return Qf.serialize}});var Uf=ri();function Hf(t,e){let r=new Uf.Parser;return t.on("data",s=>r.parse(s,e)),new Promise(s=>t.on("end",()=>s()))}z.parse=Hf});var si={};Hs(si,{default:()=>Kf});var Kf,ni=Vc(()=>{Kf={}});var ii=h((Wv,Fr)=>{Fr.exports.getStream=function(e){let r=require("net");if(typeof r.Socket=="function")return new r.Socket;{let{CloudflareSocket:s}=(ni(),Ys(si));return new s(e)}};Fr.exports.getSecureStream=function(e){var r=require("tls");return r.connect?r.connect(e):(e.socket.startTls(e),e.socket)}});var Vr=h((Jv,ai)=>{"use strict";var Xv=require("net"),Yf=require("events").EventEmitter,{parse:Wf,serialize:x}=kr(),{getStream:Xf,getSecureStream:Jf}=ii(),zf=x.flush(),Zf=x.sync(),eh=x.end(),Gr=class extends Yf{constructor(e){super(),e=e||{},this.stream=e.stream||Xf(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var r=this;this.on("newListener",function(s){s==="message"&&(r._emitMessage=!0)})}connect(e,r){var s=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){s._keepAlive&&s.stream.setKeepAlive(!0,s._keepAliveInitialDelayMillis),s.emit("connect")});let n=function(i){s._ending&&(i.code==="ECONNRESET"||i.code==="EPIPE")||s.emit("error",i)};if(this.stream.on("error",n),this.stream.on("close",function(){s.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(i){var a=i.toString("utf8");switch(a){case"S":break;case"N":return s.stream.end(),s.emit("error",new Error("The server does not support SSL connections"));default:return s.stream.end(),s.emit("error",new Error("There was an error establishing an SSL connection"))}let o={socket:s.stream};s.ssl!==!0&&(Object.assign(o,s.ssl),"key"in s.ssl&&(o.key=s.ssl.key));var c=require("net");c.isIP&&c.isIP(r)===0&&(o.servername=r);try{s.stream=Jf(o)}catch(u){return s.emit("error",u)}s.attachListeners(s.stream),s.stream.on("error",n),s.emit("sslconnect")})}attachListeners(e){Wf(e,r=>{var s=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(s,r)})}requestSsl(){this.stream.write(x.requestSsl())}startup(e){this.stream.write(x.startup(e))}cancel(e,r){this._send(x.cancel(e,r))}password(e){this._send(x.password(e))}sendSASLInitialResponseMessage(e,r){this._send(x.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(x.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(x.query(e))}parse(e){this._send(x.parse(e))}bind(e){this._send(x.bind(e))}execute(e){this._send(x.execute(e))}flush(){this.stream.writable&&this.stream.write(zf)}sync(){this._ending=!0,this._send(Zf)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(eh,()=>{this.stream.end()})}close(e){this._send(x.close(e))}describe(e){this._send(x.describe(e))}sendCopyFromChunk(e){this._send(x.copyData(e))}endCopyFrom(){this._send(x.copyDone())}sendCopyFail(e){this._send(x.copyFail(e))}};ai.exports=Gr});var li=h((zv,ci)=>{"use strict";var{Transform:th}=require("stream"),{StringDecoder:rh}=require("string_decoder"),Z=Symbol("last"),mt=Symbol("decoder");function sh(t,e,r){let s;if(this.overflow){if(s=this[mt].write(t).split(this.matcher),s.length===1)return r();s.shift(),this.overflow=!1}else this[Z]+=this[mt].write(t),s=this[Z].split(this.matcher);this[Z]=s.pop();for(let n=0;n<s.length;n++)try{ui(this,this.mapper(s[n]))}catch(i){return r(i)}if(this.overflow=this[Z].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function nh(t){if(this[Z]+=this[mt].end(),this[Z])try{ui(this,this.mapper(this[Z]))}catch(e){return t(e)}t()}function ui(t,e){e!==void 0&&t.push(e)}function oi(t){return t}function ih(t,e,r){switch(t=t||/\r?\n/,e=e||oi,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=oi)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=sh,r.flush=nh,r.readableObjectMode=!0;let s=new th(r);return s[Z]="",s[mt]=new rh("utf8"),s.matcher=t,s.mapper=e,s.maxLength=r.maxLength,s.skipOverflow=r.skipOverflow||!1,s.overflow=!1,s._destroy=function(n,i){this._writableState.errorEmitted=!1,i(n)},s}ci.exports=ih});var pi=h((Zv,K)=>{"use strict";var fi=require("path"),ah=require("stream").Stream,oh=li(),hi=require("util"),uh=5432,yt=process.platform==="win32",Ge=process.stderr,ch=56,lh=7,fh=61440,hh=32768;function ph(t){return(t&fh)==hh}var ye=["host","port","database","user","password"],Qr=ye.length,dh=ye[Qr-1];function Ur(){var t=Ge instanceof ah&&Ge.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);Ge.write(hi.format.apply(hi,e))}}Object.defineProperty(K.exports,"isWin",{get:function(){return yt},set:function(t){yt=t}});K.exports.warnTo=function(t){var e=Ge;return Ge=t,e};K.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(yt?fi.join(e.APPDATA||"./","postgresql","pgpass.conf"):fi.join(e.HOME||"./",".pgpass"));return r};K.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:yt?!0:(e=e||"<unkn>",ph(t.mode)?t.mode&(ch|lh)?(Ur('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(Ur('WARNING: password file "%s" is not a plain file',e),!1))};var mh=K.exports.match=function(t,e){return ye.slice(0,-1).reduce(function(r,s,n){return n==1&&Number(t[s]||uh)===Number(e[s])?r&&!0:r&&(e[s]==="*"||e[s]===t[s])},!0)};K.exports.getPassword=function(t,e,r){var s,n=e.pipe(oh());function i(c){var u=yh(c);u&&gh(u)&&mh(t,u)&&(s=u[dh],n.end())}var a=function(){e.destroy(),r(s)},o=function(c){e.destroy(),Ur("WARNING: error on reading file: %s",c),r(void 0)};e.on("error",o),n.on("data",i).on("end",a).on("error",o)};var yh=K.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",s=0,n=0,i=0,a={},o=!1,c=function(l,f,y){var p=t.substring(f,y);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(p=p.replace(/\\([:\\])/g,"$1")),a[ye[l]]=p},u=0;u<t.length-1;u+=1){if(e=t.charAt(u+1),r=t.charAt(u),o=s==Qr-1,o){c(s,n);break}u>=0&&e==":"&&r!=="\\"&&(c(s,n,u+1),n=u+2,s+=1)}return a=Object.keys(a).length===Qr?a:null,a},gh=K.exports.isValidEntry=function(t){for(var e={0:function(a){return a.length>0},1:function(a){return a==="*"?!0:(a=Number(a),isFinite(a)&&a>0&&a<9007199254740992&&Math.floor(a)===a)},2:function(a){return a.length>0},3:function(a){return a.length>0},4:function(a){return a.length>0}},r=0;r<ye.length;r+=1){var s=e[r],n=t[ye[r]]||"",i=s(n);if(!i)return!1}return!0}});var mi=h((t0,Hr)=>{"use strict";var e0=require("path"),di=require("fs"),gt=pi();Hr.exports=function(t,e){var r=gt.getFileName();di.stat(r,function(s,n){if(s||!gt.usePgPass(n,r))return e(void 0);var i=di.createReadStream(r);gt.getPassword(t,i,e)})};Hr.exports.warnTo=gt.warnTo});var vi=h((r0,Ei)=>{"use strict";var Eh=require("events").EventEmitter,yi=ke(),Kr=$n(),vh=pr(),Sh=yr(),gi=Wn(),wh=Be(),bh=Vr(),_h=hr(),Et=class extends Eh{constructor(e){super(),this.connectionParameters=new Sh(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var r=e||{};this._Promise=r.Promise||global.Promise,this._types=new vh(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=r.connection||new bh({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||wh.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let r=s=>{process.nextTick(()=>{s.handleError(e,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){var r=this,s=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let n=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(n)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{s._ending=!0,s.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){r.ssl?s.requestSsl():s.startup(r.getStartupConf())}),s.on("sslconnect",function(){s.startup(r.getStartupConf())}),this._attachListeners(s),s.once("end",()=>{let n=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(n),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(n):this._handleErrorEvent(n):this._connectionError||this._handleErrorEvent(n)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,s)=>{this._connect(n=>{n?s(n):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(s=>{if(s!==void 0){if(typeof s!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=s}else this.connectionParameters.password=this.password=null;e()}).catch(s=>{r.emit("error",s)});else if(this.password!==null)e();else try{mi()(this.connectionParameters,n=>{n!==void 0&&(this.connectionParameters.password=this.password=n),e()})}catch(s){this.emit("error",s)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let r=await _h.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=Kr.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try{await Kr.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(e){try{Kr.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,r={user:e.user,database:e.database},s=e.application_name||e.fallback_application_name;return s&&(r.application_name=s),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){var s=this.connection;this.host&&this.host.indexOf("/")===0?s.connect(this.host+"/.s.PGSQL."+this.port):s.connect(this.port,this.host),s.on("connect",function(){s.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(r)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,s){return this._types.setTypeParser(e,r,s)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return yi.escapeIdentifier(e)}escapeLiteral(e){return yi.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,r,s){var n,i,a,o,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(a=e.query_timeout||this.connectionParameters.query_timeout,i=n=e,typeof r=="function"&&(n.callback=n.callback||r)):(a=this.connectionParameters.query_timeout,n=new gi(e,r,s),n.callback||(i=new this._Promise((u,l)=>{n.callback=(f,y)=>f?l(f):u(y)}).catch(u=>{throw Error.captureStackTrace(u),u}))),a&&(c=n.callback,o=setTimeout(()=>{var u=new Error("Query read timeout");process.nextTick(()=>{n.handleError(u,this.connection)}),c(u),n.callback=()=>{};var l=this.queryQueue.indexOf(n);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},a),n.callback=(u,l)=>{clearTimeout(o),c(u,l)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(n),this._pulseQueryQueue(),i):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}};Et.Query=gi;Ei.exports=Et});var _i=h((s0,bi)=>{"use strict";var Ih=require("events").EventEmitter,Si=function(){},wi=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},Yr=class{constructor(e,r,s){this.client=e,this.idleListener=r,this.timeoutId=s}},ge=class{constructor(e){this.callback=e}};function Th(){throw new Error("Release called on client which has already been released to the pool.")}function vt(t,e){if(e)return{callback:e,result:void 0};let r,s,n=function(a,o){a?r(a):s(o)},i=new t(function(a,o){s=a,r=o}).catch(a=>{throw Error.captureStackTrace(a),a});return{callback:n,result:i}}function Ah(t,e){return function r(s){s.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",s)}),t._remove(e),t.emit("error",s,e)}}var Wr=class extends Ih{constructor(e,r){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||Xr().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let s=r.client;s.ref&&s.ref();let n=r.idleListener;return this._acquireClient(s,e,n,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){let r=wi(this._idle,s=>s.client===e);r!==void 0&&clearTimeout(r.timeoutId),this._clients=this._clients.filter(s=>s!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){let n=new Error("Cannot use a pool after calling end on the pool");return e?e(n):this.Promise.reject(n)}let r=vt(this.Promise,e),s=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new ge(r.callback)),s;let n=(o,c,u)=>{clearTimeout(a),r.callback(o,c,u)},i=new ge(n),a=setTimeout(()=>{wi(this._pendingQueue,o=>o.callback===n),i.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(i),s}return this.newClient(new ge(r.callback)),s}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let s=Ah(this,r);this.log("checking client timeout");let n,i=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(a=>{if(n&&clearTimeout(n),r.on("error",s),a)this.log("client failed to connect",a),this._clients=this._clients.filter(o=>o!==r),i&&(a.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(a,void 0,Si);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let o=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new ge((u,l,f)=>f()),s,!1)},this.options.maxLifetimeSeconds*1e3);o.unref(),r.once("end",()=>clearTimeout(o))}return this._acquireClient(r,e,s,!0)}})}_acquireClient(e,r,s,n){n&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,s),e.removeListener("error",s),r.timedOut?n&&this.options.verify?this.options.verify(e,e.release):e.release():n&&this.options.verify?this.options.verify(e,i=>{if(i)return e.release(i),r.callback(i,void 0,Si);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let s=!1;return n=>{s&&Th(),s=!0,this._release(e,r,n)}}_release(e,r,s){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",s,e),s||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses){e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),this._pulseQueue();return}if(this._expired.has(e)){this.log("remove expired client"),this._expired.delete(e),this._remove(e),this._pulseQueue();return}let i;this.options.idleTimeoutMillis&&(i=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&i.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new Yr(e,r,i)),this._pulseQueue()}query(e,r,s){if(typeof e=="function"){let i=vt(this.Promise,e);return setImmediate(function(){return i.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),i.result}typeof r=="function"&&(s=r,r=void 0);let n=vt(this.Promise,s);return s=n.callback,this.connect((i,a)=>{if(i)return s(i);let o=!1,c=u=>{o||(o=!0,a.release(u),s(u))};a.once("error",c),this.log("dispatching query");try{a.query(e,r,(u,l)=>{if(this.log("query dispatched"),a.removeListener("error",c),!o)return o=!0,a.release(u),u?s(u):s(void 0,l)})}catch(u){return a.release(u),s(u)}}),n.result}end(e){if(this.log("ending"),this.ending){let s=new Error("Called end on pool more than once");return e?e(s):this.Promise.reject(s)}this.ending=!0;let r=vt(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};bi.exports=Wr});var Ai=h((n0,Ti)=>{"use strict";var Ii=require("events").EventEmitter,Rh=require("util"),Jr=ke(),Ee=Ti.exports=function(t,e,r){Ii.call(this),t=Jr.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(s){s==="row"&&(this._emitRowEvents=!0)}.bind(this))};Rh.inherits(Ee,Ii);var xh={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Ee.prototype.handleError=function(t){var e=this.native.pq.resultErrorFields();if(e)for(var r in e){var s=xh[r]||r;t[s]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};Ee.prototype.then=function(t,e){return this._getPromise().then(t,e)};Ee.prototype.catch=function(t){return this._getPromise().catch(t)};Ee.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};Ee.prototype.submit=function(t){this.state="running";var e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;var r=function(i,a,o){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),i)return e.handleError(i);e._emitRowEvents&&(o.length>1?a.forEach((c,u)=>{c.forEach(l=>{e.emit("row",l,o[u])})}):a.forEach(function(c){e.emit("row",c,o)})),e.state="end",e.emit("end",o),e.callback&&e.callback(null,o)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var s=(this.values||[]).map(Jr.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let i=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(i)}return t.native.execute(this.name,s,r)}return t.native.prepare(this.name,this.text,s.length,function(i){return i?r(i):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,s,r))})}else if(this.values){if(!Array.isArray(this.values)){let i=new Error("Query values must be an array");return r(i)}var n=this.values.map(Jr.prepareValue);t.native.query(this.text,n,r)}else t.native.query(this.text,r)}});var Ci=h((i0,Oi)=>{"use strict";var Ri;try{Ri=require("pg-native")}catch(t){throw t}var Ph=pr(),xi=require("events").EventEmitter,Oh=require("util"),Ch=yr(),Pi=Ai(),$=Oi.exports=function(t){xi.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new Ph(t.types),this.native=new Ri({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var e=this.connectionParameters=new Ch(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};$.Query=Pi;Oh.inherits($,xi);$.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};$.prototype._connect=function(t){var e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,s){if(e.connectionParameters.nativeConnectionString&&(s=e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(s,function(n){if(n)return e.native.end(),t(n);e._connected=!0,e.native.on("error",function(i){e._queryable=!1,e._errorAllQueries(i),e.emit("error",i)}),e.native.on("notification",function(i){e.emit("notification",{channel:i.relname,payload:i.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};$.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(s=>{s?r(s):e()})})};$.prototype.query=function(t,e,r){var s,n,i,a,o;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")i=t.query_timeout||this.connectionParameters.query_timeout,n=s=t,typeof e=="function"&&(t.callback=e);else if(i=this.connectionParameters.query_timeout,s=new Pi(t,e,r),!s.callback){let c,u;n=new this._Promise((l,f)=>{c=l,u=f}).catch(l=>{throw Error.captureStackTrace(l),l}),s.callback=(l,f)=>l?u(l):c(f)}return i&&(o=s.callback,a=setTimeout(()=>{var c=new Error("Query read timeout");process.nextTick(()=>{s.handleError(c,this.connection)}),o(c),s.callback=()=>{};var u=this._queryQueue.indexOf(s);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},i),s.callback=(c,u)=>{clearTimeout(a),o(c,u)}),this._queryable?this._ending?(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"))}),n):(this._queryQueue.push(s),this._pulseQueryQueue(),n):(s.native=this.native,process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"))}),n)};$.prototype.end=function(t){var e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));var r;return t||(r=new this._Promise(function(s,n){t=i=>i?n(i):s()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};$.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};$.prototype._pulseQueryQueue=function(t){if(!!this._connected&&!this._hasActiveQuery()){var e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);var r=this;e.once("_done",function(){r._pulseQueryQueue()})}};$.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};$.prototype.ref=function(){};$.prototype.unref=function(){};$.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};$.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var zr=h((a0,Li)=>{"use strict";Li.exports=Ci()});var Xr=h((u0,Ve)=>{"use strict";var Lh=vi(),qh=Be(),Nh=Vr(),Dh=_i(),{DatabaseError:$h}=kr(),{escapeIdentifier:Mh,escapeLiteral:jh}=ke(),Bh=t=>class extends Dh{constructor(r){super(r,t)}},Zr=function(t){this.defaults=qh,this.Client=t,this.Query=this.Client.Query,this.Pool=Bh(this.Client),this._pools=[],this.Connection=Nh,this.types=je(),this.DatabaseError=$h,this.escapeIdentifier=Mh,this.escapeLiteral=jh};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Ve.exports=new Zr(zr()):(Ve.exports=new Zr(Lh),Object.defineProperty(Ve.exports,"native",{configurable:!0,enumerable:!1,get(){var t=null;try{t=new Zr(zr())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Ve.exports,"native",{value:t}),t}}))});var ve=h((es,Ni)=>{var St=require("buffer"),U=St.Buffer;function qi(t,e){for(var r in t)e[r]=t[r]}U.from&&U.alloc&&U.allocUnsafe&&U.allocUnsafeSlow?Ni.exports=St:(qi(St,es),es.Buffer=se);function se(t,e,r){return U(t,e,r)}se.prototype=Object.create(U.prototype);qi(U,se);se.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return U(t,e,r)};se.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var s=U(t);return e!==void 0?typeof r=="string"?s.fill(e,r):s.fill(e):s.fill(0),s};se.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return U(t)};se.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return St.SlowBuffer(t)}});var ts=h((c0,Di)=>{var wt=ve().Buffer,kh=require("stream"),Fh=require("util");function bt(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=wt.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=wt.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}Fh.inherits(bt,kh);bt.prototype.write=function(e){this.buffer=wt.concat([this.buffer,wt.from(e)]),this.emit("data",e)};bt.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};Di.exports=bt});var Mi=h((l0,$i)=>{"use strict";var Qe=require("buffer").Buffer,rs=require("buffer").SlowBuffer;$i.exports=_t;function _t(t,e){if(!Qe.isBuffer(t)||!Qe.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,s=0;s<t.length;s++)r|=t[s]^e[s];return r===0}_t.install=function(){Qe.prototype.equal=rs.prototype.equal=function(e){return _t(this,e)}};var Gh=Qe.prototype.equal,Vh=rs.prototype.equal;_t.restore=function(){Qe.prototype.equal=Gh,rs.prototype.equal=Vh}});var Bi=h((f0,ji)=>{"use strict";function ss(t){var e=(t/8|0)+(t%8===0?0:1);return e}var Qh={ES256:ss(256),ES384:ss(384),ES512:ss(521)};function Uh(t){var e=Qh[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}ji.exports=Uh});var Hi=h((h0,Ui)=>{"use strict";var It=ve().Buffer,Fi=Bi(),Tt=128,Gi=0,Hh=32,Kh=16,Yh=2,Vi=Kh|Hh|Gi<<6,At=Yh|Gi<<6;function Wh(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qi(t){if(It.isBuffer(t))return t;if(typeof t=="string")return It.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Xh(t,e){t=Qi(t);var r=Fi(e),s=r+1,n=t.length,i=0;if(t[i++]!==Vi)throw new Error('Could not find expected "seq"');var a=t[i++];if(a===(Tt|1)&&(a=t[i++]),n-i<a)throw new Error('"seq" specified length of "'+a+'", only "'+(n-i)+'" remaining');if(t[i++]!==At)throw new Error('Could not find expected "int" for "r"');var o=t[i++];if(n-i-2<o)throw new Error('"r" specified length of "'+o+'", only "'+(n-i-2)+'" available');if(s<o)throw new Error('"r" specified length of "'+o+'", max of "'+s+'" is acceptable');var c=i;if(i+=o,t[i++]!==At)throw new Error('Could not find expected "int" for "s"');var u=t[i++];if(n-i!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(n-i)+'"');if(s<u)throw new Error('"s" specified length of "'+u+'", max of "'+s+'" is acceptable');var l=i;if(i+=u,i!==n)throw new Error('Expected to consume entire buffer, but "'+(n-i)+'" bytes remain');var f=r-o,y=r-u,p=It.allocUnsafe(f+o+y+u);for(i=0;i<f;++i)p[i]=0;t.copy(p,i,c+Math.max(-f,0),c+o),i=r;for(var S=i;i<S+y;++i)p[i]=0;return t.copy(p,i,l+Math.max(-y,0),l+u),p=p.toString("base64"),p=Wh(p),p}function ki(t,e,r){for(var s=0;e+s<r&&t[e+s]===0;)++s;var n=t[e+s]>=Tt;return n&&--s,s}function Jh(t,e){t=Qi(t);var r=Fi(e),s=t.length;if(s!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+s+'"');var n=ki(t,0,r),i=ki(t,r,t.length),a=r-n,o=r-i,c=1+1+a+1+1+o,u=c<Tt,l=It.allocUnsafe((u?2:3)+c),f=0;return l[f++]=Vi,u?l[f++]=c:(l[f++]=Tt|1,l[f++]=c&255),l[f++]=At,l[f++]=a,n<0?(l[f++]=0,f+=t.copy(l,f,0,r)):f+=t.copy(l,f,n,r),l[f++]=At,l[f++]=o,i<0?(l[f++]=0,t.copy(l,f,r)):t.copy(l,f,r+i),l}Ui.exports={derToJose:Xh,joseToDer:Jh}});var as=h((p0,ta)=>{var zh=Mi(),we=ve().Buffer,H=require("crypto"),Yi=Hi(),Ki=require("util"),Zh=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Ue="secret must be a string or buffer",Se="key must be a string or a buffer",ep="key must be a string, a buffer or an object",ns=typeof H.createPublicKey=="function";ns&&(Se+=" or a KeyObject",Ue+="or a KeyObject");function Wi(t){if(!we.isBuffer(t)&&typeof t!="string"&&(!ns||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw V(Se)}function Xi(t){if(!we.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw V(ep)}function tp(t){if(!we.isBuffer(t)){if(typeof t=="string")return t;if(!ns||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw V(Ue)}}function is(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ji(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function V(t){var e=[].slice.call(arguments,1),r=Ki.format.bind(Ki,t).apply(null,e);return new TypeError(r)}function rp(t){return we.isBuffer(t)||typeof t=="string"}function He(t){return rp(t)||(t=JSON.stringify(t)),t}function zi(t){return function(r,s){tp(s),r=He(r);var n=H.createHmac("sha"+t,s),i=(n.update(r),n.digest("base64"));return is(i)}}function sp(t){return function(r,s,n){var i=zi(t)(r,n);return zh(we.from(s),we.from(i))}}function Zi(t){return function(r,s){Xi(s),r=He(r);var n=H.createSign("RSA-SHA"+t),i=(n.update(r),n.sign(s,"base64"));return is(i)}}function ea(t){return function(r,s,n){Wi(n),r=He(r),s=Ji(s);var i=H.createVerify("RSA-SHA"+t);return i.update(r),i.verify(n,s,"base64")}}function np(t){return function(r,s){Xi(s),r=He(r);var n=H.createSign("RSA-SHA"+t),i=(n.update(r),n.sign({key:s,padding:H.constants.RSA_PKCS1_PSS_PADDING,saltLength:H.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return is(i)}}function ip(t){return function(r,s,n){Wi(n),r=He(r),s=Ji(s);var i=H.createVerify("RSA-SHA"+t);return i.update(r),i.verify({key:n,padding:H.constants.RSA_PKCS1_PSS_PADDING,saltLength:H.constants.RSA_PSS_SALTLEN_DIGEST},s,"base64")}}function ap(t){var e=Zi(t);return function(){var s=e.apply(null,arguments);return s=Yi.derToJose(s,"ES"+t),s}}function op(t){var e=ea(t);return function(s,n,i){n=Yi.joseToDer(n,"ES"+t).toString("base64");var a=e(s,n,i);return a}}function up(){return function(){return""}}function cp(){return function(e,r){return r===""}}ta.exports=function(e){var r={hs:zi,rs:Zi,ps:np,es:ap,none:up},s={hs:sp,rs:ea,ps:ip,es:op,none:cp},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw V(Zh,e);var i=(n[1]||n[3]).toLowerCase(),a=n[2];return{sign:r[i](a),verify:s[i](a)}}});var os=h((d0,ra)=>{var lp=require("buffer").Buffer;ra.exports=function(e){return typeof e=="string"?e:typeof e=="number"||lp.isBuffer(e)?e.toString():JSON.stringify(e)}});var ua=h((m0,oa)=>{var fp=ve().Buffer,sa=ts(),hp=as(),pp=require("stream"),na=os(),us=require("util");function ia(t,e){return fp.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dp(t,e,r){r=r||"utf8";var s=ia(na(t),"binary"),n=ia(na(e),r);return us.format("%s.%s",s,n)}function aa(t){var e=t.header,r=t.payload,s=t.secret||t.privateKey,n=t.encoding,i=hp(e.alg),a=dp(e,r,n),o=i.sign(a,s);return us.format("%s.%s",a,o)}function Rt(t){var e=t.secret||t.privateKey||t.key,r=new sa(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new sa(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}us.inherits(Rt,pp);Rt.prototype.sign=function(){try{var e=aa({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Rt.sign=aa;oa.exports=Rt});var Ea=h((y0,ga)=>{var la=ve().Buffer,ca=ts(),mp=as(),yp=require("stream"),fa=os(),gp=require("util"),Ep=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function vp(t){return Object.prototype.toString.call(t)==="[object Object]"}function Sp(t){if(vp(t))return t;try{return JSON.parse(t)}catch{return}}function ha(t){var e=t.split(".",1)[0];return Sp(la.from(e,"base64").toString("binary"))}function wp(t){return t.split(".",2).join(".")}function pa(t){return t.split(".")[2]}function bp(t,e){e=e||"utf8";var r=t.split(".")[1];return la.from(r,"base64").toString(e)}function da(t){return Ep.test(t)&&!!ha(t)}function ma(t,e,r){if(!e){var s=new Error("Missing algorithm parameter for jws.verify");throw s.code="MISSING_ALGORITHM",s}t=fa(t);var n=pa(t),i=wp(t),a=mp(e);return a.verify(i,n,r)}function ya(t,e){if(e=e||{},t=fa(t),!da(t))return null;var r=ha(t);if(!r)return null;var s=bp(t);return(r.typ==="JWT"||e.json)&&(s=JSON.parse(s,e.encoding)),{header:r,payload:s,signature:pa(t)}}function be(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new ca(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new ca(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}gp.inherits(be,yp);be.prototype.verify=function(){try{var e=ma(this.signature.buffer,this.algorithm,this.key.buffer),r=ya(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(s){this.readable=!1,this.emit("error",s),this.emit("close")}};be.decode=ya;be.isValid=da;be.verify=ma;ga.exports=be});var Pt=h(ee=>{var va=ua(),xt=Ea(),_p=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];ee.ALGORITHMS=_p;ee.sign=va.sign;ee.verify=xt.verify;ee.decode=xt.decode;ee.isValid=xt.isValid;ee.createSign=function(e){return new va(e)};ee.createVerify=function(e){return new xt(e)}});var cs=h((E0,Sa)=>{var Ip=Pt();Sa.exports=function(t,e){e=e||{};var r=Ip.decode(t,e);if(!r)return null;var s=r.payload;if(typeof s=="string")try{var n=JSON.parse(s);n!==null&&typeof n=="object"&&(s=n)}catch{}return e.complete===!0?{header:r.header,payload:s,signature:r.signature}:s}});var Ke=h((v0,wa)=>{var Ot=function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)};Ot.prototype=Object.create(Error.prototype);Ot.prototype.constructor=Ot;wa.exports=Ot});var ls=h((S0,_a)=>{var ba=Ke(),Ct=function(t,e){ba.call(this,t),this.name="NotBeforeError",this.date=e};Ct.prototype=Object.create(ba.prototype);Ct.prototype.constructor=Ct;_a.exports=Ct});var fs=h((w0,Ta)=>{var Ia=Ke(),Lt=function(t,e){Ia.call(this,t),this.name="TokenExpiredError",this.expiredAt=e};Lt.prototype=Object.create(Ia.prototype);Lt.prototype.constructor=Lt;Ta.exports=Lt});var Ra=h((b0,Aa)=>{var _e=1e3,Ie=_e*60,Te=Ie*60,ne=Te*24,Tp=ne*7,Ap=ne*365.25;Aa.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return Rp(t);if(r==="number"&&isFinite(t))return e.long?Pp(t):xp(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function Rp(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return r*Ap;case"weeks":case"week":case"w":return r*Tp;case"days":case"day":case"d":return r*ne;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Te;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ie;case"seconds":case"second":case"secs":case"sec":case"s":return r*_e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function xp(t){var e=Math.abs(t);return e>=ne?Math.round(t/ne)+"d":e>=Te?Math.round(t/Te)+"h":e>=Ie?Math.round(t/Ie)+"m":e>=_e?Math.round(t/_e)+"s":t+"ms"}function Pp(t){var e=Math.abs(t);return e>=ne?qt(t,e,ne,"day"):e>=Te?qt(t,e,Te,"hour"):e>=Ie?qt(t,e,Ie,"minute"):e>=_e?qt(t,e,_e,"second"):t+" ms"}function qt(t,e,r,s){var n=e>=r*1.5;return Math.round(t/r)+" "+s+(n?"s":"")}});var hs=h((_0,xa)=>{var Op=Ra();xa.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var s=Op(t);return typeof s>"u"?void 0:Math.floor(r+s/1e3)}else return typeof t=="number"?r+t:void 0}});var Ye=h((I0,Pa)=>{var Cp="2.0.0",Lp=Number.MAX_SAFE_INTEGER||9007199254740991,qp=16,Np=256-6,Dp=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Pa.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:qp,MAX_SAFE_BUILD_LENGTH:Np,MAX_SAFE_INTEGER:Lp,RELEASE_TYPES:Dp,SEMVER_SPEC_VERSION:Cp,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var We=h((T0,Oa)=>{var $p=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};Oa.exports=$p});var Ae=h((Y,Ca)=>{var{MAX_SAFE_COMPONENT_LENGTH:ps,MAX_SAFE_BUILD_LENGTH:Mp,MAX_LENGTH:jp}=Ye(),Bp=We();Y=Ca.exports={};var kp=Y.re=[],Fp=Y.safeRe=[],d=Y.src=[],m=Y.t={},Gp=0,ds="[a-zA-Z0-9-]",Vp=[["\\s",1],["\\d",jp],[ds,Mp]],Qp=t=>{for(let[e,r]of Vp)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},E=(t,e,r)=>{let s=Qp(e),n=Gp++;Bp(t,n,e),m[t]=n,d[n]=e,kp[n]=new RegExp(e,r?"g":void 0),Fp[n]=new RegExp(s,r?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*");E("NUMERICIDENTIFIERLOOSE","\\d+");E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${ds}*`);E("MAINVERSION",`(${d[m.NUMERICIDENTIFIER]})\\.(${d[m.NUMERICIDENTIFIER]})\\.(${d[m.NUMERICIDENTIFIER]})`);E("MAINVERSIONLOOSE",`(${d[m.NUMERICIDENTIFIERLOOSE]})\\.(${d[m.NUMERICIDENTIFIERLOOSE]})\\.(${d[m.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASEIDENTIFIER",`(?:${d[m.NUMERICIDENTIFIER]}|${d[m.NONNUMERICIDENTIFIER]})`);E("PRERELEASEIDENTIFIERLOOSE",`(?:${d[m.NUMERICIDENTIFIERLOOSE]}|${d[m.NONNUMERICIDENTIFIER]})`);E("PRERELEASE",`(?:-(${d[m.PRERELEASEIDENTIFIER]}(?:\\.${d[m.PRERELEASEIDENTIFIER]})*))`);E("PRERELEASELOOSE",`(?:-?(${d[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[m.PRERELEASEIDENTIFIERLOOSE]})*))`);E("BUILDIDENTIFIER",`${ds}+`);E("BUILD",`(?:\\+(${d[m.BUILDIDENTIFIER]}(?:\\.${d[m.BUILDIDENTIFIER]})*))`);E("FULLPLAIN",`v?${d[m.MAINVERSION]}${d[m.PRERELEASE]}?${d[m.BUILD]}?`);E("FULL",`^${d[m.FULLPLAIN]}$`);E("LOOSEPLAIN",`[v=\\s]*${d[m.MAINVERSIONLOOSE]}${d[m.PRERELEASELOOSE]}?${d[m.BUILD]}?`);E("LOOSE",`^${d[m.LOOSEPLAIN]}$`);E("GTLT","((?:<|>)?=?)");E("XRANGEIDENTIFIERLOOSE",`${d[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);E("XRANGEIDENTIFIER",`${d[m.NUMERICIDENTIFIER]}|x|X|\\*`);E("XRANGEPLAIN",`[v=\\s]*(${d[m.XRANGEIDENTIFIER]})(?:\\.(${d[m.XRANGEIDENTIFIER]})(?:\\.(${d[m.XRANGEIDENTIFIER]})(?:${d[m.PRERELEASE]})?${d[m.BUILD]}?)?)?`);E("XRANGEPLAINLOOSE",`[v=\\s]*(${d[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[m.XRANGEIDENTIFIERLOOSE]})(?:${d[m.PRERELEASELOOSE]})?${d[m.BUILD]}?)?)?`);E("XRANGE",`^${d[m.GTLT]}\\s*${d[m.XRANGEPLAIN]}$`);E("XRANGELOOSE",`^${d[m.GTLT]}\\s*${d[m.XRANGEPLAINLOOSE]}$`);E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${ps}})(?:\\.(\\d{1,${ps}}))?(?:\\.(\\d{1,${ps}}))?`);E("COERCE",`${d[m.COERCEPLAIN]}(?:$|[^\\d])`);E("COERCEFULL",d[m.COERCEPLAIN]+`(?:${d[m.PRERELEASE]})?(?:${d[m.BUILD]})?(?:$|[^\\d])`);E("COERCERTL",d[m.COERCE],!0);E("COERCERTLFULL",d[m.COERCEFULL],!0);E("LONETILDE","(?:~>?)");E("TILDETRIM",`(\\s*)${d[m.LONETILDE]}\\s+`,!0);Y.tildeTrimReplace="$1~";E("TILDE",`^${d[m.LONETILDE]}${d[m.XRANGEPLAIN]}$`);E("TILDELOOSE",`^${d[m.LONETILDE]}${d[m.XRANGEPLAINLOOSE]}$`);E("LONECARET","(?:\\^)");E("CARETTRIM",`(\\s*)${d[m.LONECARET]}\\s+`,!0);Y.caretTrimReplace="$1^";E("CARET",`^${d[m.LONECARET]}${d[m.XRANGEPLAIN]}$`);E("CARETLOOSE",`^${d[m.LONECARET]}${d[m.XRANGEPLAINLOOSE]}$`);E("COMPARATORLOOSE",`^${d[m.GTLT]}\\s*(${d[m.LOOSEPLAIN]})$|^$`);E("COMPARATOR",`^${d[m.GTLT]}\\s*(${d[m.FULLPLAIN]})$|^$`);E("COMPARATORTRIM",`(\\s*)${d[m.GTLT]}\\s*(${d[m.LOOSEPLAIN]}|${d[m.XRANGEPLAIN]})`,!0);Y.comparatorTrimReplace="$1$2$3";E("HYPHENRANGE",`^\\s*(${d[m.XRANGEPLAIN]})\\s+-\\s+(${d[m.XRANGEPLAIN]})\\s*$`);E("HYPHENRANGELOOSE",`^\\s*(${d[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[m.XRANGEPLAINLOOSE]})\\s*$`);E("STAR","(<|>)?=?\\s*\\*");E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Nt=h((A0,La)=>{var Up=Object.freeze({loose:!0}),Hp=Object.freeze({}),Kp=t=>t?typeof t!="object"?Up:t:Hp;La.exports=Kp});var ms=h((R0,Da)=>{var qa=/^[0-9]+$/,Na=(t,e)=>{let r=qa.test(t),s=qa.test(e);return r&&s&&(t=+t,e=+e),t===e?0:r&&!s?-1:s&&!r?1:t<e?-1:1},Yp=(t,e)=>Na(e,t);Da.exports={compareIdentifiers:Na,rcompareIdentifiers:Yp}});var C=h((x0,Ba)=>{var Dt=We(),{MAX_LENGTH:$a,MAX_SAFE_INTEGER:$t}=Ye(),{safeRe:Ma,t:ja}=Ae(),Wp=Nt(),{compareIdentifiers:Re}=ms(),j=class{constructor(e,r){if(r=Wp(r),e instanceof j){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>$a)throw new TypeError(`version is longer than ${$a} characters`);Dt("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let s=e.trim().match(r.loose?Ma[ja.LOOSE]:Ma[ja.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>$t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>$t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>$t||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let i=+n;if(i>=0&&i<$t)return i}return n}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Dt("SemVer.compare",this.version,this.options,e),!(e instanceof j)){if(typeof e=="string"&&e===this.version)return 0;e=new j(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof j||(e=new j(e,this.options)),Re(this.major,e.major)||Re(this.minor,e.minor)||Re(this.patch,e.patch)}comparePre(e){if(e instanceof j||(e=new j(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let s=this.prerelease[r],n=e.prerelease[r];if(Dt("prerelease compare",r,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return Re(s,n)}while(++r)}compareBuild(e){e instanceof j||(e=new j(e,this.options));let r=0;do{let s=this.build[r],n=e.build[r];if(Dt("prerelease compare",r,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return Re(s,n)}while(++r)}inc(e,r,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,s),this.inc("pre",r,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,s),this.inc("pre",r,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(s)?1:0;if(!r&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(r){let i=[r,n];s===!1&&(i=[r]),Re(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Ba.exports=j});var ie=h((P0,Fa)=>{var ka=C(),Xp=(t,e,r=!1)=>{if(t instanceof ka)return t;try{return new ka(t,e)}catch(s){if(!r)return null;throw s}};Fa.exports=Xp});var Va=h((O0,Ga)=>{var Jp=ie(),zp=(t,e)=>{let r=Jp(t,e);return r?r.version:null};Ga.exports=zp});var Ua=h((C0,Qa)=>{var Zp=ie(),ed=(t,e)=>{let r=Zp(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Qa.exports=ed});var Ya=h((L0,Ka)=>{var Ha=C(),td=(t,e,r,s,n)=>{typeof r=="string"&&(n=s,s=r,r=void 0);try{return new Ha(t instanceof Ha?t.version:t,r).inc(e,s,n).version}catch{return null}};Ka.exports=td});var Ja=h((q0,Xa)=>{var Wa=ie(),rd=(t,e)=>{let r=Wa(t,null,!0),s=Wa(e,null,!0),n=r.compare(s);if(n===0)return null;let i=n>0,a=i?r:s,o=i?s:r,c=!!a.prerelease.length;if(!!o.prerelease.length&&!c)return!o.patch&&!o.minor?"major":a.patch?"patch":a.minor?"minor":"major";let l=c?"pre":"";return r.major!==s.major?l+"major":r.minor!==s.minor?l+"minor":r.patch!==s.patch?l+"patch":"prerelease"};Xa.exports=rd});var Za=h((N0,za)=>{var sd=C(),nd=(t,e)=>new sd(t,e).major;za.exports=nd});var to=h((D0,eo)=>{var id=C(),ad=(t,e)=>new id(t,e).minor;eo.exports=ad});var so=h(($0,ro)=>{var od=C(),ud=(t,e)=>new od(t,e).patch;ro.exports=ud});var io=h((M0,no)=>{var cd=ie(),ld=(t,e)=>{let r=cd(t,e);return r&&r.prerelease.length?r.prerelease:null};no.exports=ld});var F=h((j0,oo)=>{var ao=C(),fd=(t,e,r)=>new ao(t,r).compare(new ao(e,r));oo.exports=fd});var co=h((B0,uo)=>{var hd=F(),pd=(t,e,r)=>hd(e,t,r);uo.exports=pd});var fo=h((k0,lo)=>{var dd=F(),md=(t,e)=>dd(t,e,!0);lo.exports=md});var Mt=h((F0,po)=>{var ho=C(),yd=(t,e,r)=>{let s=new ho(t,r),n=new ho(e,r);return s.compare(n)||s.compareBuild(n)};po.exports=yd});var yo=h((G0,mo)=>{var gd=Mt(),Ed=(t,e)=>t.sort((r,s)=>gd(r,s,e));mo.exports=Ed});var Eo=h((V0,go)=>{var vd=Mt(),Sd=(t,e)=>t.sort((r,s)=>vd(s,r,e));go.exports=Sd});var Xe=h((Q0,vo)=>{var wd=F(),bd=(t,e,r)=>wd(t,e,r)>0;vo.exports=bd});var jt=h((U0,So)=>{var _d=F(),Id=(t,e,r)=>_d(t,e,r)<0;So.exports=Id});var ys=h((H0,wo)=>{var Td=F(),Ad=(t,e,r)=>Td(t,e,r)===0;wo.exports=Ad});var gs=h((K0,bo)=>{var Rd=F(),xd=(t,e,r)=>Rd(t,e,r)!==0;bo.exports=xd});var Bt=h((Y0,_o)=>{var Pd=F(),Od=(t,e,r)=>Pd(t,e,r)>=0;_o.exports=Od});var kt=h((W0,Io)=>{var Cd=F(),Ld=(t,e,r)=>Cd(t,e,r)<=0;Io.exports=Ld});var Es=h((X0,To)=>{var qd=ys(),Nd=gs(),Dd=Xe(),$d=Bt(),Md=jt(),jd=kt(),Bd=(t,e,r,s)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return qd(t,r,s);case"!=":return Nd(t,r,s);case">":return Dd(t,r,s);case">=":return $d(t,r,s);case"<":return Md(t,r,s);case"<=":return jd(t,r,s);default:throw new TypeError(`Invalid operator: ${e}`)}};To.exports=Bd});var Ro=h((J0,Ao)=>{var kd=C(),Fd=ie(),{safeRe:Ft,t:Gt}=Ae(),Gd=(t,e)=>{if(t instanceof kd)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Ft[Gt.COERCEFULL]:Ft[Gt.COERCE]);else{let c=e.includePrerelease?Ft[Gt.COERCERTLFULL]:Ft[Gt.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let s=r[2],n=r[3]||"0",i=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",o=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Fd(`${s}.${n}.${i}${a}${o}`,e)};Ao.exports=Gd});var Po=h((z0,xo)=>{"use strict";xo.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Co=h((Z0,Oo)=>{"use strict";Oo.exports=v;v.Node=ae;v.create=v;function v(t){var e=this;if(e instanceof v||(e=new v),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)e.push(arguments[r]);return e}v.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};v.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};v.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};v.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Qd(this,arguments[t]);return this.length};v.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Ud(this,arguments[t]);return this.length};v.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};v.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};v.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,s=0;r!==null;s++)t.call(e,r.value,s,this),r=r.next};v.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,s=this.length-1;r!==null;s--)t.call(e,r.value,s,this),r=r.prev};v.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};v.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};v.prototype.map=function(t,e){e=e||this;for(var r=new v,s=this.head;s!==null;)r.push(t.call(e,s.value,this)),s=s.next;return r};v.prototype.mapReverse=function(t,e){e=e||this;for(var r=new v,s=this.tail;s!==null;)r.push(t.call(e,s.value,this)),s=s.prev;return r};v.prototype.reduce=function(t,e){var r,s=this.head;if(arguments.length>1)r=e;else if(this.head)s=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;s!==null;n++)r=t(r,s.value,n),s=s.next;return r};v.prototype.reduceReverse=function(t,e){var r,s=this.tail;if(arguments.length>1)r=e;else if(this.tail)s=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;s!==null;n--)r=t(r,s.value,n),s=s.prev;return r};v.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};v.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};v.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new v;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=0,n=this.head;n!==null&&s<t;s++)n=n.next;for(;n!==null&&s<e;s++,n=n.next)r.push(n.value);return r};v.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new v;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var s=this.length,n=this.tail;n!==null&&s>e;s--)n=n.prev;for(;n!==null&&s>t;s--,n=n.prev)r.push(n.value);return r};v.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var s=0,n=this.head;n!==null&&s<t;s++)n=n.next;for(var i=[],s=0;n&&s<e;s++)i.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var s=0;s<r.length;s++)n=Vd(this,n,r[s]);return i};v.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=e,this.tail=t,this};function Vd(t,e,r){var s=e===t.head?new ae(r,null,e,t):new ae(r,e,e.next,t);return s.next===null&&(t.tail=s),s.prev===null&&(t.head=s),t.length++,s}function Qd(t,e){t.tail=new ae(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Ud(t,e){t.head=new ae(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ae(t,e,r,s){if(!(this instanceof ae))return new ae(t,e,r,s);this.list=s,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Po()(v)}catch{}});var $o=h((eS,Do)=>{"use strict";var Hd=Co(),oe=Symbol("max"),X=Symbol("length"),xe=Symbol("lengthCalculator"),ze=Symbol("allowStale"),ue=Symbol("maxAge"),W=Symbol("dispose"),Lo=Symbol("noDisposeOnSet"),P=Symbol("lruList"),Q=Symbol("cache"),No=Symbol("updateAgeOnGet"),vs=()=>1,ws=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[oe]=e.max||1/0,s=e.length||vs;if(this[xe]=typeof s!="function"?vs:s,this[ze]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[ue]=e.maxAge||0,this[W]=e.dispose,this[Lo]=e.noDisposeOnSet||!1,this[No]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[oe]=e||1/0,Je(this)}get max(){return this[oe]}set allowStale(e){this[ze]=!!e}get allowStale(){return this[ze]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[ue]=e,Je(this)}get maxAge(){return this[ue]}set lengthCalculator(e){typeof e!="function"&&(e=vs),e!==this[xe]&&(this[xe]=e,this[X]=0,this[P].forEach(r=>{r.length=this[xe](r.value,r.key),this[X]+=r.length})),Je(this)}get lengthCalculator(){return this[xe]}get length(){return this[X]}get itemCount(){return this[P].length}rforEach(e,r){r=r||this;for(let s=this[P].tail;s!==null;){let n=s.prev;qo(this,e,s,r),s=n}}forEach(e,r){r=r||this;for(let s=this[P].head;s!==null;){let n=s.next;qo(this,e,s,r),s=n}}keys(){return this[P].toArray().map(e=>e.key)}values(){return this[P].toArray().map(e=>e.value)}reset(){this[W]&&this[P]&&this[P].length&&this[P].forEach(e=>this[W](e.key,e.value)),this[Q]=new Map,this[P]=new Hd,this[X]=0}dump(){return this[P].map(e=>Vt(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[P]}set(e,r,s){if(s=s||this[ue],s&&typeof s!="number")throw new TypeError("maxAge must be a number");let n=s?Date.now():0,i=this[xe](r,e);if(this[Q].has(e)){if(i>this[oe])return Pe(this,this[Q].get(e)),!1;let c=this[Q].get(e).value;return this[W]&&(this[Lo]||this[W](e,c.value)),c.now=n,c.maxAge=s,c.value=r,this[X]+=i-c.length,c.length=i,this.get(e),Je(this),!0}let a=new bs(e,r,i,n,s);return a.length>this[oe]?(this[W]&&this[W](e,r),!1):(this[X]+=a.length,this[P].unshift(a),this[Q].set(e,this[P].head),Je(this),!0)}has(e){if(!this[Q].has(e))return!1;let r=this[Q].get(e).value;return!Vt(this,r)}get(e){return Ss(this,e,!0)}peek(e){return Ss(this,e,!1)}pop(){let e=this[P].tail;return e?(Pe(this,e),e.value):null}del(e){Pe(this,this[Q].get(e))}load(e){this.reset();let r=Date.now();for(let s=e.length-1;s>=0;s--){let n=e[s],i=n.e||0;if(i===0)this.set(n.k,n.v);else{let a=i-r;a>0&&this.set(n.k,n.v,a)}}}prune(){this[Q].forEach((e,r)=>Ss(this,r,!1))}},Ss=(t,e,r)=>{let s=t[Q].get(e);if(s){let n=s.value;if(Vt(t,n)){if(Pe(t,s),!t[ze])return}else r&&(t[No]&&(s.value.now=Date.now()),t[P].unshiftNode(s));return n.value}},Vt=(t,e)=>{if(!e||!e.maxAge&&!t[ue])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[ue]&&r>t[ue]},Je=t=>{if(t[X]>t[oe])for(let e=t[P].tail;t[X]>t[oe]&&e!==null;){let r=e.prev;Pe(t,e),e=r}},Pe=(t,e)=>{if(e){let r=e.value;t[W]&&t[W](r.key,r.value),t[X]-=r.length,t[Q].delete(r.key),t[P].removeNode(e)}},bs=class{constructor(e,r,s,n,i){this.key=e,this.value=r,this.length=s,this.now=n,this.maxAge=i||0}},qo=(t,e,r,s)=>{let n=r.value;Vt(t,n)&&(Pe(t,r),t[ze]||(n=void 0)),n&&e.call(s,n.value,n.key,t)};Do.exports=ws});var G=h((tS,ko)=>{var ce=class{constructor(e,r){if(r=Yd(r),e instanceof ce)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new ce(e.raw,r);if(e instanceof _s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(n=>!jo(n[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&tm(n[0])){this.set=[n];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let s=((this.options.includePrerelease&&Zd)|(this.options.loose&&em))+":"+e,n=Mo.get(s);if(n)return n;let i=this.options.loose,a=i?M[q.HYPHENRANGELOOSE]:M[q.HYPHENRANGE];e=e.replace(a,fm(this.options.includePrerelease)),b("hyphen replace",e),e=e.replace(M[q.COMPARATORTRIM],Xd),b("comparator trim",e),e=e.replace(M[q.TILDETRIM],Jd),b("tilde trim",e),e=e.replace(M[q.CARETTRIM],zd),b("caret trim",e);let o=e.split(" ").map(f=>rm(f,this.options)).join(" ").split(/\s+/).map(f=>lm(f,this.options));i&&(o=o.filter(f=>(b("loose invalid filter",f,this.options),!!f.match(M[q.COMPARATORLOOSE])))),b("range list",o);let c=new Map,u=o.map(f=>new _s(f,this.options));for(let f of u){if(jo(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return Mo.set(s,l),l}intersects(e,r){if(!(e instanceof ce))throw new TypeError("a Range is required");return this.set.some(s=>Bo(s,r)&&e.set.some(n=>Bo(n,r)&&s.every(i=>n.every(a=>i.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Wd(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(hm(this.set[r],e,this.options))return!0;return!1}};ko.exports=ce;var Kd=$o(),Mo=new Kd({max:1e3}),Yd=Nt(),_s=Ze(),b=We(),Wd=C(),{safeRe:M,t:q,comparatorTrimReplace:Xd,tildeTrimReplace:Jd,caretTrimReplace:zd}=Ae(),{FLAG_INCLUDE_PRERELEASE:Zd,FLAG_LOOSE:em}=Ye(),jo=t=>t.value==="<0.0.0-0",tm=t=>t.value==="",Bo=(t,e)=>{let r=!0,s=t.slice(),n=s.pop();for(;r&&s.length;)r=s.every(i=>n.intersects(i,e)),n=s.pop();return r},rm=(t,e)=>(b("comp",t,e),t=im(t,e),b("caret",t),t=sm(t,e),b("tildes",t),t=om(t,e),b("xrange",t),t=cm(t,e),b("stars",t),t),N=t=>!t||t.toLowerCase()==="x"||t==="*",sm=(t,e)=>t.trim().split(/\s+/).map(r=>nm(r,e)).join(" "),nm=(t,e)=>{let r=e.loose?M[q.TILDELOOSE]:M[q.TILDE];return t.replace(r,(s,n,i,a,o)=>{b("tilde",t,s,n,i,a,o);let c;return N(n)?c="":N(i)?c=`>=${n}.0.0 <${+n+1}.0.0-0`:N(a)?c=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:o?(b("replaceTilde pr",o),c=`>=${n}.${i}.${a}-${o} <${n}.${+i+1}.0-0`):c=`>=${n}.${i}.${a} <${n}.${+i+1}.0-0`,b("tilde return",c),c})},im=(t,e)=>t.trim().split(/\s+/).map(r=>am(r,e)).join(" "),am=(t,e)=>{b("caret",t,e);let r=e.loose?M[q.CARETLOOSE]:M[q.CARET],s=e.includePrerelease?"-0":"";return t.replace(r,(n,i,a,o,c)=>{b("caret",t,n,i,a,o,c);let u;return N(i)?u="":N(a)?u=`>=${i}.0.0${s} <${+i+1}.0.0-0`:N(o)?i==="0"?u=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`:u=`>=${i}.${a}.0${s} <${+i+1}.0.0-0`:c?(b("replaceCaret pr",c),i==="0"?a==="0"?u=`>=${i}.${a}.${o}-${c} <${i}.${a}.${+o+1}-0`:u=`>=${i}.${a}.${o}-${c} <${i}.${+a+1}.0-0`:u=`>=${i}.${a}.${o}-${c} <${+i+1}.0.0-0`):(b("no pr"),i==="0"?a==="0"?u=`>=${i}.${a}.${o}${s} <${i}.${a}.${+o+1}-0`:u=`>=${i}.${a}.${o}${s} <${i}.${+a+1}.0-0`:u=`>=${i}.${a}.${o} <${+i+1}.0.0-0`),b("caret return",u),u})},om=(t,e)=>(b("replaceXRanges",t,e),t.split(/\s+/).map(r=>um(r,e)).join(" ")),um=(t,e)=>{t=t.trim();let r=e.loose?M[q.XRANGELOOSE]:M[q.XRANGE];return t.replace(r,(s,n,i,a,o,c)=>{b("xRange",t,s,n,i,a,o,c);let u=N(i),l=u||N(a),f=l||N(o),y=f;return n==="="&&y&&(n=""),c=e.includePrerelease?"-0":"",u?n===">"||n==="<"?s="<0.0.0-0":s="*":n&&y?(l&&(a=0),o=0,n===">"?(n=">=",l?(i=+i+1,a=0,o=0):(a=+a+1,o=0)):n==="<="&&(n="<",l?i=+i+1:a=+a+1),n==="<"&&(c="-0"),s=`${n+i}.${a}.${o}${c}`):l?s=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(s=`>=${i}.${a}.0${c} <${i}.${+a+1}.0-0`),b("xRange return",s),s})},cm=(t,e)=>(b("replaceStars",t,e),t.trim().replace(M[q.STAR],"")),lm=(t,e)=>(b("replaceGTE0",t,e),t.trim().replace(M[e.includePrerelease?q.GTE0PRE:q.GTE0],"")),fm=t=>(e,r,s,n,i,a,o,c,u,l,f,y,p)=>(N(s)?r="":N(n)?r=`>=${s}.0.0${t?"-0":""}`:N(i)?r=`>=${s}.${n}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,N(u)?c="":N(l)?c=`<${+u+1}.0.0-0`:N(f)?c=`<${u}.${+l+1}.0-0`:y?c=`<=${u}.${l}.${f}-${y}`:t?c=`<${u}.${l}.${+f+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),hm=(t,e,r)=>{for(let s=0;s<t.length;s++)if(!t[s].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let s=0;s<t.length;s++)if(b(t[s].semver),t[s].semver!==_s.ANY&&t[s].semver.prerelease.length>0){let n=t[s].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var Ze=h((rS,Ho)=>{var et=Symbol("SemVer ANY"),Oe=class{static get ANY(){return et}constructor(e,r){if(r=Fo(r),e instanceof Oe){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Ts("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===et?this.value="":this.value=this.operator+this.semver.version,Ts("comp",this)}parse(e){let r=this.options.loose?Go[Vo.COMPARATORLOOSE]:Go[Vo.COMPARATOR],s=e.match(r);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new Qo(s[2],this.options.loose):this.semver=et}toString(){return this.value}test(e){if(Ts("Comparator.test",e,this.options.loose),this.semver===et||e===et)return!0;if(typeof e=="string")try{e=new Qo(e,this.options)}catch{return!1}return Is(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Oe))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Uo(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new Uo(this.value,r).test(e.semver):(r=Fo(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Is(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Is(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Ho.exports=Oe;var Fo=Nt(),{safeRe:Go,t:Vo}=Ae(),Is=Es(),Ts=We(),Qo=C(),Uo=G()});var tt=h((sS,Ko)=>{var pm=G(),dm=(t,e,r)=>{try{e=new pm(e,r)}catch{return!1}return e.test(t)};Ko.exports=dm});var Wo=h((nS,Yo)=>{var mm=G(),ym=(t,e)=>new mm(t,e).set.map(r=>r.map(s=>s.value).join(" ").trim().split(" "));Yo.exports=ym});var Jo=h((iS,Xo)=>{var gm=C(),Em=G(),vm=(t,e,r)=>{let s=null,n=null,i=null;try{i=new Em(e,r)}catch{return null}return t.forEach(a=>{i.test(a)&&(!s||n.compare(a)===-1)&&(s=a,n=new gm(s,r))}),s};Xo.exports=vm});var Zo=h((aS,zo)=>{var Sm=C(),wm=G(),bm=(t,e,r)=>{let s=null,n=null,i=null;try{i=new wm(e,r)}catch{return null}return t.forEach(a=>{i.test(a)&&(!s||n.compare(a)===1)&&(s=a,n=new Sm(s,r))}),s};zo.exports=bm});var ru=h((oS,tu)=>{var As=C(),_m=G(),eu=Xe(),Im=(t,e)=>{t=new _m(t,e);let r=new As("0.0.0");if(t.test(r)||(r=new As("0.0.0-0"),t.test(r)))return r;r=null;for(let s=0;s<t.set.length;++s){let n=t.set[s],i=null;n.forEach(a=>{let o=new As(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!i||eu(o,i))&&(i=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),i&&(!r||eu(r,i))&&(r=i)}return r&&t.test(r)?r:null};tu.exports=Im});var nu=h((uS,su)=>{var Tm=G(),Am=(t,e)=>{try{return new Tm(t,e).range||"*"}catch{return null}};su.exports=Am});var Qt=h((cS,uu)=>{var Rm=C(),ou=Ze(),{ANY:xm}=ou,Pm=G(),Om=tt(),iu=Xe(),au=jt(),Cm=kt(),Lm=Bt(),qm=(t,e,r,s)=>{t=new Rm(t,s),e=new Pm(e,s);let n,i,a,o,c;switch(r){case">":n=iu,i=Cm,a=au,o=">",c=">=";break;case"<":n=au,i=Lm,a=iu,o="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Om(t,e,s))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],f=null,y=null;if(l.forEach(p=>{p.semver===xm&&(p=new ou(">=0.0.0")),f=f||p,y=y||p,n(p.semver,f.semver,s)?f=p:a(p.semver,y.semver,s)&&(y=p)}),f.operator===o||f.operator===c||(!y.operator||y.operator===o)&&i(t,y.semver))return!1;if(y.operator===c&&a(t,y.semver))return!1}return!0};uu.exports=qm});var lu=h((lS,cu)=>{var Nm=Qt(),Dm=(t,e,r)=>Nm(t,e,">",r);cu.exports=Dm});var hu=h((fS,fu)=>{var $m=Qt(),Mm=(t,e,r)=>$m(t,e,"<",r);fu.exports=Mm});var mu=h((hS,du)=>{var pu=G(),jm=(t,e,r)=>(t=new pu(t,r),e=new pu(e,r),t.intersects(e,r));du.exports=jm});var gu=h((pS,yu)=>{var Bm=tt(),km=F();yu.exports=(t,e,r)=>{let s=[],n=null,i=null,a=t.sort((l,f)=>km(l,f,r));for(let l of a)Bm(l,e,r)?(i=l,n||(n=l)):(i&&s.push([n,i]),i=null,n=null);n&&s.push([n,null]);let o=[];for(let[l,f]of s)l===f?o.push(l):!f&&l===a[0]?o.push("*"):f?l===a[0]?o.push(`<=${f}`):o.push(`${l} - ${f}`):o.push(`>=${l}`);let c=o.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var _u=h((dS,bu)=>{var Eu=G(),xs=Ze(),{ANY:Rs}=xs,rt=tt(),Ps=F(),Fm=(t,e,r={})=>{if(t===e)return!0;t=new Eu(t,r),e=new Eu(e,r);let s=!1;e:for(let n of t.set){for(let i of e.set){let a=Vm(n,i,r);if(s=s||a!==null,a)continue e}if(s)return!1}return!0},Gm=[new xs(">=0.0.0-0")],vu=[new xs(">=0.0.0")],Vm=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Rs){if(e.length===1&&e[0].semver===Rs)return!0;r.includePrerelease?t=Gm:t=vu}if(e.length===1&&e[0].semver===Rs){if(r.includePrerelease)return!0;e=vu}let s=new Set,n,i;for(let p of t)p.operator===">"||p.operator===">="?n=Su(n,p,r):p.operator==="<"||p.operator==="<="?i=wu(i,p,r):s.add(p.semver);if(s.size>1)return null;let a;if(n&&i){if(a=Ps(n.semver,i.semver,r),a>0)return null;if(a===0&&(n.operator!==">="||i.operator!=="<="))return null}for(let p of s){if(n&&!rt(p,String(n),r)||i&&!rt(p,String(i),r))return null;for(let S of e)if(!rt(p,String(S),r))return!1;return!0}let o,c,u,l,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,y=n&&!r.includePrerelease&&n.semver.prerelease.length?n.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let p of e){if(l=l||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",n){if(y&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===y.major&&p.semver.minor===y.minor&&p.semver.patch===y.patch&&(y=!1),p.operator===">"||p.operator===">="){if(o=Su(n,p,r),o===p&&o!==n)return!1}else if(n.operator===">="&&!rt(n.semver,String(p),r))return!1}if(i){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator==="<"||p.operator==="<="){if(c=wu(i,p,r),c===p&&c!==i)return!1}else if(i.operator==="<="&&!rt(i.semver,String(p),r))return!1}if(!p.operator&&(i||n)&&a!==0)return!1}return!(n&&u&&!i&&a!==0||i&&l&&!n&&a!==0||y||f)},Su=(t,e,r)=>{if(!t)return e;let s=Ps(t.semver,e.semver,r);return s>0?t:s<0||e.operator===">"&&t.operator===">="?e:t},wu=(t,e,r)=>{if(!t)return e;let s=Ps(t.semver,e.semver,r);return s<0?t:s>0||e.operator==="<"&&t.operator==="<="?e:t};bu.exports=Fm});var Ut=h((mS,Au)=>{var Os=Ae(),Iu=Ye(),Qm=C(),Tu=ms(),Um=ie(),Hm=Va(),Km=Ua(),Ym=Ya(),Wm=Ja(),Xm=Za(),Jm=to(),zm=so(),Zm=io(),ey=F(),ty=co(),ry=fo(),sy=Mt(),ny=yo(),iy=Eo(),ay=Xe(),oy=jt(),uy=ys(),cy=gs(),ly=Bt(),fy=kt(),hy=Es(),py=Ro(),dy=Ze(),my=G(),yy=tt(),gy=Wo(),Ey=Jo(),vy=Zo(),Sy=ru(),wy=nu(),by=Qt(),_y=lu(),Iy=hu(),Ty=mu(),Ay=gu(),Ry=_u();Au.exports={parse:Um,valid:Hm,clean:Km,inc:Ym,diff:Wm,major:Xm,minor:Jm,patch:zm,prerelease:Zm,compare:ey,rcompare:ty,compareLoose:ry,compareBuild:sy,sort:ny,rsort:iy,gt:ay,lt:oy,eq:uy,neq:cy,gte:ly,lte:fy,cmp:hy,coerce:py,Comparator:dy,Range:my,satisfies:yy,toComparators:gy,maxSatisfying:Ey,minSatisfying:vy,minVersion:Sy,validRange:wy,outside:by,gtr:_y,ltr:Iy,intersects:Ty,simplifyRange:Ay,subset:Ry,SemVer:Qm,re:Os.re,src:Os.src,tokens:Os.t,SEMVER_SPEC_VERSION:Iu.SEMVER_SPEC_VERSION,RELEASE_TYPES:Iu.RELEASE_TYPES,compareIdentifiers:Tu.compareIdentifiers,rcompareIdentifiers:Tu.rcompareIdentifiers}});var xu=h((yS,Ru)=>{var xy=Ut();Ru.exports=xy.satisfies(process.version,">=15.7.0")});var Ou=h((gS,Pu)=>{var Py=Ut();Pu.exports=Py.satisfies(process.version,">=16.9.0")});var Cs=h((ES,Cu)=>{var Oy=xu(),Cy=Ou(),Ly={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},qy={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};Cu.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let s=Ly[r];if(!s)throw new Error(`Unknown key type "${r}".`);if(!s.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${s.join(", ")}.`);if(Oy)switch(r){case"ec":let n=e.asymmetricKeyDetails.namedCurve,i=qy[t];if(n!==i)throw new Error(`"alg" parameter "${t}" requires curve "${i}".`);break;case"rsa-pss":if(Cy){let a=parseInt(t.slice(-3),10),{hashAlgorithm:o,mgf1HashAlgorithm:c,saltLength:u}=e.asymmetricKeyDetails;if(o!==`sha${a}`||c!==o)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var Ls=h((vS,Lu)=>{var Ny=Ut();Lu.exports=Ny.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Du=h((SS,Nu)=>{var w=Ke(),Dy=ls(),qu=fs(),$y=cs(),My=hs(),jy=Cs(),By=Ls(),ky=Pt(),{KeyObject:Fy,createSecretKey:Gy,createPublicKey:Vy}=require("crypto"),qs=["RS256","RS384","RS512"],Qy=["ES256","ES384","ES512"],Ns=["RS256","RS384","RS512"],Uy=["HS256","HS384","HS512"];By&&(qs.splice(qs.length,0,"PS256","PS384","PS512"),Ns.splice(Ns.length,0,"PS256","PS384","PS512"));Nu.exports=function(t,e,r,s){typeof r=="function"&&!s&&(s=r,r={}),r||(r={}),r=Object.assign({},r);let n;if(s?n=s:n=function(l,f){if(l)throw l;return f},r.clockTimestamp&&typeof r.clockTimestamp!="number")return n(new w("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return n(new w("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return n(new w("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return n(new w("jwt must be provided"));if(typeof t!="string")return n(new w("jwt must be a string"));let a=t.split(".");if(a.length!==3)return n(new w("jwt malformed"));let o;try{o=$y(t,{complete:!0})}catch(l){return n(l)}if(!o)return n(new w("invalid token"));let c=o.header,u;if(typeof e=="function"){if(!s)return n(new w("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=function(l,f){return f(null,e)};return u(c,function(l,f){if(l)return n(new w("error in secret or public key callback: "+l.message));let y=a[2].trim()!=="";if(!y&&f)return n(new w("jwt signature is required"));if(y&&!f)return n(new w("secret or public key must be provided"));if(!y&&!r.algorithms)return n(new w('please specify "none" in "algorithms" to verify unsigned tokens'));if(f!=null&&!(f instanceof Fy))try{f=Vy(f)}catch{try{f=Gy(typeof f=="string"?Buffer.from(f):f)}catch{return n(new w("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(f.type==="secret"?r.algorithms=Uy:["rsa","rsa-pss"].includes(f.asymmetricKeyType)?r.algorithms=Ns:f.asymmetricKeyType==="ec"?r.algorithms=Qy:r.algorithms=qs),r.algorithms.indexOf(o.header.alg)===-1)return n(new w("invalid algorithm"));if(c.alg.startsWith("HS")&&f.type!=="secret")return n(new w(`secretOrPublicKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)&&f.type!=="public")return n(new w(`secretOrPublicKey must be an asymmetric key when using ${c.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{jy(c.alg,f)}catch(R){return n(R)}let p;try{p=ky.verify(t,o.header.alg,f)}catch(R){return n(R)}if(!p)return n(new w("invalid signature"));let S=o.payload;if(typeof S.nbf<"u"&&!r.ignoreNotBefore){if(typeof S.nbf!="number")return n(new w("invalid nbf value"));if(S.nbf>i+(r.clockTolerance||0))return n(new Dy("jwt not active",new Date(S.nbf*1e3)))}if(typeof S.exp<"u"&&!r.ignoreExpiration){if(typeof S.exp!="number")return n(new w("invalid exp value"));if(i>=S.exp+(r.clockTolerance||0))return n(new qu("jwt expired",new Date(S.exp*1e3)))}if(r.audience){let R=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(S.aud)?S.aud:[S.aud]).some(function(Us){return R.some(function(Jt){return Jt instanceof RegExp?Jt.test(Us):Jt===Us})}))return n(new w("jwt audience invalid. expected: "+R.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&S.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(S.iss)===-1))return n(new w("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&S.sub!==r.subject)return n(new w("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&S.jti!==r.jwtid)return n(new w("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&S.nonce!==r.nonce)return n(new w("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof S.iat!="number")return n(new w("iat required when maxAge is specified"));let R=My(r.maxAge,S.iat);if(typeof R>"u")return n(new w('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=R+(r.clockTolerance||0))return n(new qu("maxAge exceeded",new Date(R*1e3)))}if(r.complete===!0){let R=o.signature;return n(null,{header:c,payload:S,signature:R})}return n(null,S)})}});var Fu=h((wS,ku)=>{var $u=1/0,ju=9007199254740991,Hy=17976931348623157e292,Mu=0/0,Ky="[object Arguments]",Yy="[object Function]",Wy="[object GeneratorFunction]",Xy="[object String]",Jy="[object Symbol]",zy=/^\s+|\s+$/g,Zy=/^[-+]0x[0-9a-f]+$/i,eg=/^0b[01]+$/i,tg=/^0o[0-7]+$/i,rg=/^(?:0|[1-9]\d*)$/,sg=parseInt;function ng(t,e){for(var r=-1,s=t?t.length:0,n=Array(s);++r<s;)n[r]=e(t[r],r,t);return n}function ig(t,e,r,s){for(var n=t.length,i=r+(s?1:-1);s?i--:++i<n;)if(e(t[i],i,t))return i;return-1}function ag(t,e,r){if(e!==e)return ig(t,og,r);for(var s=r-1,n=t.length;++s<n;)if(t[s]===e)return s;return-1}function og(t){return t!==t}function ug(t,e){for(var r=-1,s=Array(t);++r<t;)s[r]=e(r);return s}function cg(t,e){return ng(e,function(r){return t[r]})}function lg(t,e){return function(r){return t(e(r))}}var Ht=Object.prototype,$s=Ht.hasOwnProperty,Kt=Ht.toString,fg=Ht.propertyIsEnumerable,hg=lg(Object.keys,Object),pg=Math.max;function dg(t,e){var r=Bu(t)||vg(t)?ug(t.length,String):[],s=r.length,n=!!s;for(var i in t)(e||$s.call(t,i))&&!(n&&(i=="length"||yg(i,s)))&&r.push(i);return r}function mg(t){if(!gg(t))return hg(t);var e=[];for(var r in Object(t))$s.call(t,r)&&r!="constructor"&&e.push(r);return e}function yg(t,e){return e=e??ju,!!e&&(typeof t=="number"||rg.test(t))&&t>-1&&t%1==0&&t<e}function gg(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Ht;return t===r}function Eg(t,e,r,s){t=Ms(t)?t:Pg(t),r=r&&!s?Ag(r):0;var n=t.length;return r<0&&(r=pg(n+r,0)),_g(t)?r<=n&&t.indexOf(e,r)>-1:!!n&&ag(t,e,r)>-1}function vg(t){return Sg(t)&&$s.call(t,"callee")&&(!fg.call(t,"callee")||Kt.call(t)==Ky)}var Bu=Array.isArray;function Ms(t){return t!=null&&bg(t.length)&&!wg(t)}function Sg(t){return js(t)&&Ms(t)}function wg(t){var e=Ds(t)?Kt.call(t):"";return e==Yy||e==Wy}function bg(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ju}function Ds(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function js(t){return!!t&&typeof t=="object"}function _g(t){return typeof t=="string"||!Bu(t)&&js(t)&&Kt.call(t)==Xy}function Ig(t){return typeof t=="symbol"||js(t)&&Kt.call(t)==Jy}function Tg(t){if(!t)return t===0?t:0;if(t=Rg(t),t===$u||t===-$u){var e=t<0?-1:1;return e*Hy}return t===t?t:0}function Ag(t){var e=Tg(t),r=e%1;return e===e?r?e-r:e:0}function Rg(t){if(typeof t=="number")return t;if(Ig(t))return Mu;if(Ds(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ds(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(zy,"");var r=eg.test(t);return r||tg.test(t)?sg(t.slice(2),r?2:8):Zy.test(t)?Mu:+t}function xg(t){return Ms(t)?dg(t):mg(t)}function Pg(t){return t?cg(t,xg(t)):[]}ku.exports=Eg});var Vu=h((bS,Gu)=>{var Og="[object Boolean]",Cg=Object.prototype,Lg=Cg.toString;function qg(t){return t===!0||t===!1||Ng(t)&&Lg.call(t)==Og}function Ng(t){return!!t&&typeof t=="object"}Gu.exports=qg});var Yu=h((_S,Ku)=>{var Qu=1/0,Dg=17976931348623157e292,Uu=0/0,$g="[object Symbol]",Mg=/^\s+|\s+$/g,jg=/^[-+]0x[0-9a-f]+$/i,Bg=/^0b[01]+$/i,kg=/^0o[0-7]+$/i,Fg=parseInt,Gg=Object.prototype,Vg=Gg.toString;function Qg(t){return typeof t=="number"&&t==Yg(t)}function Hu(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ug(t){return!!t&&typeof t=="object"}function Hg(t){return typeof t=="symbol"||Ug(t)&&Vg.call(t)==$g}function Kg(t){if(!t)return t===0?t:0;if(t=Wg(t),t===Qu||t===-Qu){var e=t<0?-1:1;return e*Dg}return t===t?t:0}function Yg(t){var e=Kg(t),r=e%1;return e===e?r?e-r:e:0}function Wg(t){if(typeof t=="number")return t;if(Hg(t))return Uu;if(Hu(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Hu(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Mg,"");var r=Bg.test(t);return r||kg.test(t)?Fg(t.slice(2),r?2:8):jg.test(t)?Uu:+t}Ku.exports=Qg});var Xu=h((IS,Wu)=>{var Xg="[object Number]",Jg=Object.prototype,zg=Jg.toString;function Zg(t){return!!t&&typeof t=="object"}function eE(t){return typeof t=="number"||Zg(t)&&zg.call(t)==Xg}Wu.exports=eE});var ec=h((TS,Zu)=>{var tE="[object Object]";function rE(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function sE(t,e){return function(r){return t(e(r))}}var nE=Function.prototype,Ju=Object.prototype,zu=nE.toString,iE=Ju.hasOwnProperty,aE=zu.call(Object),oE=Ju.toString,uE=sE(Object.getPrototypeOf,Object);function cE(t){return!!t&&typeof t=="object"}function lE(t){if(!cE(t)||oE.call(t)!=tE||rE(t))return!1;var e=uE(t);if(e===null)return!0;var r=iE.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&zu.call(r)==aE}Zu.exports=lE});var rc=h((AS,tc)=>{var fE="[object String]",hE=Object.prototype,pE=hE.toString,dE=Array.isArray;function mE(t){return!!t&&typeof t=="object"}function yE(t){return typeof t=="string"||!dE(t)&&mE(t)&&pE.call(t)==fE}tc.exports=yE});var oc=h((RS,ac)=>{var gE="Expected a function",sc=1/0,EE=17976931348623157e292,nc=0/0,vE="[object Symbol]",SE=/^\s+|\s+$/g,wE=/^[-+]0x[0-9a-f]+$/i,bE=/^0b[01]+$/i,_E=/^0o[0-7]+$/i,IE=parseInt,TE=Object.prototype,AE=TE.toString;function RE(t,e){var r;if(typeof e!="function")throw new TypeError(gE);return t=LE(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function xE(t){return RE(2,t)}function ic(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function PE(t){return!!t&&typeof t=="object"}function OE(t){return typeof t=="symbol"||PE(t)&&AE.call(t)==vE}function CE(t){if(!t)return t===0?t:0;if(t=qE(t),t===sc||t===-sc){var e=t<0?-1:1;return e*EE}return t===t?t:0}function LE(t){var e=CE(t),r=e%1;return e===e?r?e-r:e:0}function qE(t){if(typeof t=="number")return t;if(OE(t))return nc;if(ic(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ic(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(SE,"");var r=bE.test(t);return r||_E.test(t)?IE(t.slice(2),r?2:8):wE.test(t)?nc:+t}ac.exports=xE});var yc=h((xS,mc)=>{var uc=hs(),NE=Ls(),DE=Cs(),cc=Pt(),$E=Fu(),Yt=Vu(),lc=Yu(),Bs=Xu(),hc=ec(),te=rc(),ME=oc(),{KeyObject:jE,createSecretKey:BE,createPrivateKey:kE}=require("crypto"),pc=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];NE&&pc.splice(3,0,"PS256","PS384","PS512");var FE={expiresIn:{isValid:function(t){return lc(t)||te(t)&&t},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(t){return lc(t)||te(t)&&t},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(t){return te(t)||Array.isArray(t)},message:'"audience" must be a string or array'},algorithm:{isValid:$E.bind(null,pc),message:'"algorithm" must be a valid string enum value'},header:{isValid:hc,message:'"header" must be an object'},encoding:{isValid:te,message:'"encoding" must be a string'},issuer:{isValid:te,message:'"issuer" must be a string'},subject:{isValid:te,message:'"subject" must be a string'},jwtid:{isValid:te,message:'"jwtid" must be a string'},noTimestamp:{isValid:Yt,message:'"noTimestamp" must be a boolean'},keyid:{isValid:te,message:'"keyid" must be a string'},mutatePayload:{isValid:Yt,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Yt,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Yt,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},GE={iat:{isValid:Bs,message:'"iat" should be a number of seconds'},exp:{isValid:Bs,message:'"exp" should be a number of seconds'},nbf:{isValid:Bs,message:'"nbf" should be a number of seconds'}};function dc(t,e,r,s){if(!hc(r))throw new Error('Expected "'+s+'" to be a plain object.');Object.keys(r).forEach(function(n){let i=t[n];if(!i){if(!e)throw new Error('"'+n+'" is not allowed in "'+s+'"');return}if(!i.isValid(r[n]))throw new Error(i.message)})}function VE(t){return dc(FE,!1,t,"options")}function QE(t){return dc(GE,!0,t,"payload")}var fc={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},UE=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];mc.exports=function(t,e,r,s){typeof r=="function"?(s=r,r={}):r=r||{};let n=typeof t=="object"&&!Buffer.isBuffer(t),i=Object.assign({alg:r.algorithm||"HS256",typ:n?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(s)return s(u);throw u}if(!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof jE))try{e=kE(e)}catch{try{e=BE(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!r.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(n){try{QE(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=UE.filter(function(l){return typeof r[l]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{VE(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{DE(i.alg,e)}catch(u){return a(u)}let o=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:n&&(t.iat=o),typeof r.notBefore<"u"){try{t.nbf=uc(r.notBefore,o)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=uc(r.expiresIn,o)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(fc).forEach(function(u){let l=fc[u];if(typeof r[u]<"u"){if(typeof t[l]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+l+'" property.'));t[l]=r[u]}});let c=r.encoding||"utf8";if(typeof s=="function")s=s&&ME(s),cc.createSign({header:i,privateKey:e,payload:t,encoding:c}).once("error",s).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)return s(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));s(null,u)});else{let u=cc.sign({header:i,payload:t,secret:e,encoding:c});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return u}}});var Ec=h((PS,gc)=>{gc.exports={decode:cs(),verify:Du(),sign:yc(),JsonWebTokenError:Ke(),NotBeforeError:ls(),TokenExpiredError:fs()}});var Tc=h(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});var HE=["00000000000","11111111111","22222222222","33333333333","44444444444","55555555555","66666666666","77777777777","88888888888","99999999999","12345678909"],KE=/[.-]/g,YE=/[^\d]/g,st=t=>{let e=t.split("").map(i=>parseInt(i,10)),r=e.length+1,n=e.map((i,a)=>i*(r-a)).reduce((i,a)=>i+a)%11;return n<2?0:11-n},ks=(t,e)=>{let r=e?KE:YE;return(t||"").replace(r,"")},Sc=t=>ks(t).replace(/^(\d{3})(\d{3})(\d{3})(\d{2})$/,"$1.$2.$3-$4"),WE=(t,e)=>{let r=ks(t,e);if(!r||r.length!==11||HE.includes(r))return!1;let s=r.substr(0,9);return s+=st(s),s+=st(s),s.substr(-2)===r.substr(-2)},XE=t=>{let e="";for(let r=0;r<9;r+=1)e+=Math.floor(Math.random()*9);return e+=st(e),e+=st(e),t?Sc(e):e},wc={verifierDigit:st,strip:ks,format:Sc,isValid:WE,generate:XE},JE=["00000000000000","11111111111111","22222222222222","33333333333333","44444444444444","55555555555555","66666666666666","77777777777777","88888888888888","99999999999999"],zE=/[-\\/.]/g,ZE=/[^\d]/g,nt=t=>{let e=2,n=t.split("").reduce((i,a)=>[parseInt(a,10)].concat(i),[]).reduce((i,a)=>(i+=a*e,e=e===9?2:e+1,i),0)%11;return n<2?0:11-n},Fs=(t,e)=>{let r=e?zE:ZE;return(t||"").replace(r,"")},bc=t=>Fs(t).replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5"),ev=(t,e)=>{let r=Fs(t,e);if(!r||r.length!==14||JE.includes(r))return!1;let s=r.substr(0,12);return s+=nt(s),s+=nt(s),s.substr(-2)===r.substr(-2)},tv=t=>{let e="";for(let r=0;r<12;r+=1)e+=Math.floor(Math.random()*9);return e+=nt(e),e+=nt(e),t?bc(e):e},_c={verifierDigit:nt,strip:Fs,format:bc,isValid:ev,generate:tv},Ic=t=>({type:"document",base:t.string(),messages:{"document.cpf":"CPF inv\xE1lido","document.cnpj":"CNPJ inv\xE1lido"},rules:{cpf:{validate(e,r,s,n){return wc.isValid(e)?e:r.error("document.cpf")}},cnpj:{validate(e,r,s,n){return _c.isValid(e)?e:r.error("document.cnpj")}}}});Ce.cpf=wc;Ce.cnpj=_c;Ce.validator=Ic;Ce.default=Ic});var Pc=h((NS,rv)=>{rv.exports={name:"dotenv",version:"16.4.5",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec","test:coverage":"tap --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var qc=h((DS,J)=>{var Gs=require("fs"),Vs=require("path"),sv=require("os"),nv=require("crypto"),iv=Pc(),Qs=iv.version,av=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function ov(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let s;for(;(s=av.exec(r))!=null;){let n=s[1],i=s[2]||"";i=i.trim();let a=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),a==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),e[n]=i}return e}function uv(t){let e=Lc(t),r=A.configDotenv({path:e});if(!r.parsed){let a=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw a.code="MISSING_DATA",a}let s=Cc(t).split(","),n=s.length,i;for(let a=0;a<n;a++)try{let o=s[a].trim(),c=fv(r,o);i=A.decrypt(c.ciphertext,c.key);break}catch(o){if(a+1>=n)throw o}return A.parse(i)}function cv(t){console.log(`[dotenv@${Qs}][INFO] ${t}`)}function lv(t){console.log(`[dotenv@${Qs}][WARN] ${t}`)}function Xt(t){console.log(`[dotenv@${Qs}][DEBUG] ${t}`)}function Cc(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function fv(t,e){let r;try{r=new URL(e)}catch(o){if(o.code==="ERR_INVALID_URL"){let c=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw c.code="INVALID_DOTENV_KEY",c}throw o}let s=r.password;if(!s){let o=new Error("INVALID_DOTENV_KEY: Missing key part");throw o.code="INVALID_DOTENV_KEY",o}let n=r.searchParams.get("environment");if(!n){let o=new Error("INVALID_DOTENV_KEY: Missing environment part");throw o.code="INVALID_DOTENV_KEY",o}let i=`DOTENV_VAULT_${n.toUpperCase()}`,a=t.parsed[i];if(!a){let o=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw o.code="NOT_FOUND_DOTENV_ENVIRONMENT",o}return{ciphertext:a,key:s}}function Lc(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(let r of t.path)Gs.existsSync(r)&&(e=r.endsWith(".vault")?r:`${r}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=Vs.resolve(process.cwd(),".env.vault");return Gs.existsSync(e)?e:null}function Oc(t){return t[0]==="~"?Vs.join(sv.homedir(),t.slice(1)):t}function hv(t){cv("Loading env from encrypted .env.vault");let e=A._parseVault(t),r=process.env;return t&&t.processEnv!=null&&(r=t.processEnv),A.populate(r,e,t),{parsed:e}}function pv(t){let e=Vs.resolve(process.cwd(),".env"),r="utf8",s=Boolean(t&&t.debug);t&&t.encoding?r=t.encoding:s&&Xt("No encoding is specified. UTF-8 is used by default");let n=[e];if(t&&t.path)if(!Array.isArray(t.path))n=[Oc(t.path)];else{n=[];for(let c of t.path)n.push(Oc(c))}let i,a={};for(let c of n)try{let u=A.parse(Gs.readFileSync(c,{encoding:r}));A.populate(a,u,t)}catch(u){s&&Xt(`Failed to load ${c} ${u.message}`),i=u}let o=process.env;return t&&t.processEnv!=null&&(o=t.processEnv),A.populate(o,a,t),i?{parsed:a,error:i}:{parsed:a}}function dv(t){if(Cc(t).length===0)return A.configDotenv(t);let e=Lc(t);return e?A._configVault(t):(lv(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),A.configDotenv(t))}function mv(t,e){let r=Buffer.from(e.slice(-64),"hex"),s=Buffer.from(t,"base64"),n=s.subarray(0,12),i=s.subarray(-16);s=s.subarray(12,-16);try{let a=nv.createDecipheriv("aes-256-gcm",r,n);return a.setAuthTag(i),`${a.update(s)}${a.final()}`}catch(a){let o=a instanceof RangeError,c=a.message==="Invalid key length",u=a.message==="Unsupported state or unable to authenticate data";if(o||c){let l=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw l.code="INVALID_DOTENV_KEY",l}else if(u){let l=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw l.code="DECRYPTION_FAILED",l}else throw a}}function yv(t,e,r={}){let s=Boolean(r&&r.debug),n=Boolean(r&&r.override);if(typeof e!="object"){let i=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw i.code="OBJECT_REQUIRED",i}for(let i of Object.keys(e))Object.prototype.hasOwnProperty.call(t,i)?(n===!0&&(t[i]=e[i]),s&&Xt(n===!0?`"${i}" is already defined and WAS overwritten`:`"${i}" is already defined and was NOT overwritten`)):t[i]=e[i]}var A={configDotenv:pv,_configVault:hv,_parseVault:uv,config:dv,decrypt:mv,parse:ov,populate:yv};J.exports.configDotenv=A.configDotenv;J.exports._configVault=A._configVault;J.exports._parseVault=A._parseVault;J.exports.config=A.config;J.exports.decrypt=A.decrypt;J.exports.parse=A.parse;J.exports.populate=A.populate;J.exports=A});var Ev={};Hs(Ev,{lambdaHandler:()=>gv});module.exports=Ys(Ev);var Nc=at(Xr());var vc=at(Ec()),Wt=(t,e)=>{let r={};return e?r={cpf:e.cpf,name:e.name,email:e.email}:r={cpf:"anonymous"},vc.default.sign(r,t,{expiresIn:60*60})};var Ac=at(Tc()),Rc=t=>{let e=t.replace(/\D/g,"");return Ac.cpf.isValid(e)};var xc=async(t,e)=>{try{await e.connect();let r="SELECT * FROM clients WHERE cpf = $1",s=await e.query(r,[t]);return await e.end(),s.rows}catch(r){throw await e.end(),console.error("Erro ao conectar ao banco de dados:",r),r}};var Dc=require("crypto"),$c=at(qc());$c.default.config();var gv=async t=>{let e=new Nc.Client({user:process.env.DB_USER,host:process.env.DB_HOST,database:process.env.DB_DATABASE,password:process.env.DB_PASSWORD,port:Number(process.env.DB_PORT)}),r=(0,Dc.randomBytes)(32).toString("base64");try{if(t.body===void 0||t.body===null)return{statusCode:200,body:JSON.stringify({token:Wt(r)})};let{cpf:s}=JSON.parse(t.body);if(s===void 0||s==="")return{statusCode:200,body:JSON.stringify({token:Wt(r)})};if(Rc(s)){await e.end(),await e.connect();let n=await xc(s,e);return await e.end(),n[0]?{statusCode:200,body:JSON.stringify({token:Wt(r,n[0])})}:{statusCode:404,body:JSON.stringify({message:"Cliente n\xE3o encontrado"})}}else return{statusCode:400,body:JSON.stringify({message:"CPF inv\xE1lido"})}}catch(s){return console.error(s),{statusCode:500,body:JSON.stringify({message:s instanceof Error?s.message:"some error happened"})}}};0&&(module.exports={lambdaHandler});
/*!
 * cpf-cnpj-validator v1.0.3
 * (c) 2020-present Carvalho, Vinicius Luiz <carvalho.viniciusluiz@gmail.com>
 * Released under the MIT License.
 */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
